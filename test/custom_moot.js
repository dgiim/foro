/*

  Moot v1.11.0 (beta) | March 26, 2014

  "Free forums and commenting for your site"

  https://moot.it | (c) 2014 Moot Inc

*/
!function(e){function t(t){if("undefined"!=typeof jQuery){var n=jQuery().jquery.split(".");return Number(n[0])>1||Number(n[1])>6?t(jQuery):jQuery(".moot").text("Moot requires jQuery 1.7+")}var o=e.createElement("script");o.onload=o.onreadystatechange=function(){var e=o.readyState;(void 0===e||/complete|loaded/.test(e))&&t(jQuery)},o.src="//code.jquery.com/jquery-1.11.0.min.js";var i=e.getElementsByTagName("head")[0];i.insertBefore(o,i.firstChild)}e.write("<style>a.moot { display: none }</style>"),t(function(e){e(".moot")[0]&&!e("link[href*='/moot.css']")[0]&&e("head").append(e("<link/>",{href:"https://cdn.moot.it/1.11.0/moot.css",rel:"stylesheet",type:"text/css"})),!function(e,t){"use strict";function n(e,n){var o={},i=[].slice;return e=e||{},t.extend(e,{on:function(n,i,a){if(n=n.split(" "),t.isFunction(i)&&(a=i,i=0),t.isFunction(a)){for(var r,l=0,s=n.length;s>l;l++)r=t.trim(n[l]),(o[r]=o[r]||[]).push(a),(s>1||"*"==n)&&(a.typed=!0);i&&(a.typed?a("inline",i):a(i))}return e},off:function(n,i){if("*"==n)return o={};n=n.split(" ");for(var a,r=0;n.length>r;r++)if(a=t.trim(n[r]),i){for(var l=o[a]||[],s=-1,c=0,u=l.length;u>c;c++)if(l[c]===i||l[c].listener===i){s=c;break}s>=0&&l.splice(s,1)}else o[a]=[];return e},one:function(n,o){function i(){e.off(n,o),o.apply(e,arguments)}return t.isFunction(o)&&(i.listener=o,e.on(n,i)),e},emit:function(t){var n=i.call(arguments,1),a=o[t]||[],r=o["*"];r&&(a=a.concat(r));for(var l,s,c=0,u=a.length;u>c;++c)if(l=a[c],l&&(s=l.typed?[t].concat(n):n,l.apply(e,s)===!1))return e;return e}}),t.each(n||[],function(n,o){e[o]=function(n){return t.isFunction(n)?e.on(o,n):e.emit.apply(e,[o].concat(i.call(arguments)))}}),e}function o(o){function i(e,n,o){var i=new FormData;e.params[0],e.transport="ajax",t.each(n,function(e,t){i.append(t.altname||t.name,t)}),i.append("jsonrpc",JSON.stringify(e));var r=new XMLHttpRequest;r.onload=function(e){a(JSON.parse(e.target.response))},r.onprogress=function(e){o.progress(e)},r.open("POST",m),r.send(i)}function a(e){if(!e)return s.emit("heartbeat");if("string"==typeof e&&(e=JSON.parse(e)),e.params&&"ping"==e.params[0])return s.emit("heartbeat");if(t.isArray(e))return t.each(e,function(e,t){a(t)});s.emit("receive",e),e.session&&(c=e.session,t.cookie2(x,c.sessionId)),o.pollUrl=o.pollUrl||e.pollUrl,l||(s.time_offset=new Date-1e3*e.server_time,e.result&&s.ready(e.result),l=!0);var n=p[e.id],i=void 0!==e.error;n?(n.always(e.result,e.error),i||n.done(e.result)):"emit"==e.method&&u.emit.apply(null,e.params),i&&(n&&n.fail(e.error,e.data),s.error(e.error,e.data))}if(t.isFunction(o))return j.push(o);var r,l,s=n(this,["ready","error","close","reconnect","destroy"]),c={sessionId:t.cookie2(x)},u=n({}),d=0,p={};"string"==typeof o&&(o={url:o}),s.conf=o=t.extend({transports:"upgrade,xdomain",pollUrl:null,secure:!0},o);var m=o.url;if("string"==typeof m&&(m=m.split(":"),m={hostname:m[1].slice(2),port:m[2]}),443==m.port&&(m.port=80),m="http"+(o.secure?"s":"")+"://"+m.hostname+(m.port&&80!=m.port?":"+m.port:""),t.each(o.transports.split(","),function(e,t){var n=T[t];!r&&n&&n.supported&&(r=new n(m,s,a),s.transport=t)}),!r)throw Error("json-rpc: no support for "+o.transports);s.event=function(e,t){return u.on(e,t),s},s.session=function(){return t.extend({},c)},s.reload=function(){return d=0,r.destroy(),r.ping(),s},s.poll=function(){var e=o.pollUrl;e&&(-1==e.indexOf("://")&&(e=m+e),r.poll&&r.poll(e,t.extend({},c,{transport:r.name})))},s.log=function(e,n){var o={message:e,data:t.extend(n,{url:location.href,ua:navigator.userAgent})};t.post(m,JSON.stringify({method:"log",jsonrpc:"2.1.0",params:[o],session:c}),t.noop,"json")},window.mootlog=s.log,s.call=function(o){if(s.is_closed||s.is_destroyed)throw Error("connection "+(s.is_closed?"closed":"destroyed"));var a,u=[].slice.call(arguments),m=u.slice(-1)[0],f={method:o,params:u.slice(1,-1)};if(t.isFunction(m)?(a=n({},["done","fail","always","progress"]).done(m),f.id="#"+ ++d,p[f.id]=a):(void 0!==m&&(f.params=u.slice(1)),m=void 0),f.params.length||delete f.params,f.session=c,l||(f.jsonrpc="2.1.0"),f.transport=s.transport,s.emit("send",o,f.params,a),!e&&window.File&&f.params){var g=f.params[0],h=g&&g.files;if(h)return delete g.files,i(f,h,a),a}return r.send(JSON.stringify(f)),a},t.each(j,function(){this.call(s,r)});var f=e;e||t(window).load(function(){f=!0}),s.destroy(function(){s.is_destroyed=!0,r.destroy()}).error(function(e){"error_invalid_channel"==e&&(delete c.channelId,s.inited=!1,s.reconnect())}).close(function(){l=!1}).ready(function(){t.isFunction(r.poll)&&(e?s.poll():setTimeout(s.poll,f?1e3:3e3))})}function i(e,t,n){e/=n?U:2,e+=~~(e/t);for(var o=D-A,i=~~(o*S/2),a=0;e>i;a+=D)e=~~(e/o);var r=(D-A+1)*e,l=e+O;return a+~~(r/l)}function a(e,t){for(var n=1114112,o=0,i=e.length;i>o;++o){var a=e[o];a>=t&&n>a&&(n=a)}return n}function r(e){return e+(26>e?97:22)}function l(e,t){return t+A>=e?A:e>=t+S?S:e-t}function s(e,t){for(var n=[],o=D,i=t;;o+=D){var a=l(o,e);if(a>i){n.push(r(i));break}n.push(r(a+(i-a)%(D-a))),i=~~((i-a)/(D-a))}return n}function c(e){e=t.map(e.split(""),function(e){return e.charCodeAt(0)});for(var n=[],o=[],r=0,l=e.length;l>r;++r){var c=e[r];128>c?n.push(c):o.push(c)}var u,d;u=d=n.length,u&&n.push(45);for(var p=F,m=I,f=0,l=e.length;l>d;++p,++f){var g=a(o,p);f+=(g-p)*(d+1),p=g;for(var r=0;l>r;++r){var c=e[r];p>c?++f:c==p&&(n=n.concat(s(m,f)),m=i(f,d+1,u==d),f=0,d++)}}return String.fromCharCode.apply(String,n)}function u(e,n){return t.isFunction(e)&&e.apply(n,[].slice.call(arguments,2)),n}function d(e,t){e=e.replace("/moot.it/","/api.moot.it/").replace("/i/","/");var n=e.split("/");n[n.length-1]=n.slice(-1)[0].replace(":","#"),e=n.join("/");var o=e.split("#");o[1]&&(e=o[0]+"#"+m(o[1])),e=E(e),"/"==e.href.slice(-1)&&(e.href=e.href.slice(0,-1),e.pathname=e.pathname.slice(0,-1));var i=e.href,a=i.split("/"),r="//"==i.slice(0,2)||i.indexOf("://")>0?i.slice(8).indexOf("/")+8:i.indexOf("/");return e.path=i.slice(r),e.host=a[2],t&&!/moot.it/.test(e.host)&&(t=E(t),e.orighost=e.host,e.host=t.hostname+(t.port?":"+t.port:""),e.protocol=t.protocol,e.hostname=t.hostname,e.port=t.port),e}function p(e){return e?e.replace(/\</g,"&lt;").replace(/\>/g,"&gt;"):""}function m(e){e=t.trim(e.toLowerCase().slice(0,10*L)),e=e.replace(/&quest;/g,"");var n={a:/[áàâãªäå]/g,o:/[òóôõºöø]/g,e:/[éèê]/g,i:/[íìîı]/g,u:/[úùûü]/g,c:/[ç]/g,n:/[ñ]/g,"-":/[_\s]+/g};return t.each(n,function(t,n){e=e.replace(n,t)}),e=c(e).slice(0,10*L),e=e.replace(/[^a-z0-9-]/g,"").replace(/^-|-$/g,"").replace(/\-{2,}/g,"-"),e||(""+Math.random()).slice(10)}function f(e,n){if(void 0===e||"number"==typeof e)return N;if(t.isFunction(e)&&(n=e,e="ready"),"string"==typeof e)if(-1!=e.indexOf("/"))e={url:e};else if(t.isFunction(n))return(W[e]=W[e]||[]).push(n);if(t.isPlainObject(e)){e=t.extend({api_url:"https://api.moot.it"},e),"object"!=typeof console&&(e.debug=0);var o=new g(e);return t.isFunction(n)&&o.on("ready",n),t.each(W,function(e,n){t.each(n,function(){o.on(e,this)})}),o.emit("before:init",o),N=o,o}}function g(e){function i(t){var n="reload"==t,o={version:r.version,path:r.page.path.replace(":","#"),currentForum:r.name,embedUrl:e.embedUrl||e.embedurl,pageLocation:e.pageUrl,expand_all:!e.show_title,reload:n},i=e.api||e.sso;if(i&&i.key){o.api=i,r.is_signed=!0;try{var l=atob(i.message),s=JSON.parse(l);r.is_sso=!!s.user}catch(c){return console.error("Invalid Moot SSO: "+l,c)}}e.sso&&(r.is_sso=!0),a.call("init",o,function(e){r.emit(t,e)}).fail(function(e){r.emit("error",e[0])})}var a,r=n(this),l=d(e.url,e.api_url),s=l.pathname.split("/"),c=!l.hash&&s.length>2;e.url=l,e.api_url=l.protocol+"//"+l.host,t.extend(r,{version:"1.11.0",channel:null,name:s[1],path:"/"+s[1],is_commenting:!!l.hash,is_forum:!l.hash&&3>s.length,is_threaded:c,is_signed:!1,is_sso:!1,conf:function(){return e},load:function(t,n){if(r.is_stub)throw Error("Forum not created");t=t.replace(":","#"),c&&!t.split("#")[1]&&(t=e.url.path);var o=new w(r,t,a);r.emit("before:load",o),a.call("moots",{path:o.path,expand_all:!e.show_title},function(e){o.emit("load",e),r.one("load",n).emit("load",o)})},search:function(e,t){return r.load("/?"+e,t)},create:function(n,o){var i=f.fixTitle(n.title),l=i?i.length>30*L?"title:too_long":r.user.is_logged?r.user.banned?"user:banned":"":"user:not_logged":"title:missing";if(t.map(r.page,function(e){i==e.seed.title&&(l="duplicate")}),l)throw Error(l);t.extend(n,{title:i,key:m(i),body:f.fixBody(n.body,!0),pageLocation:e.pageUrl,path:n.path||r.page.path,watch:!0}),c&&t.extend(n,{pageTitle:e.categoryName,mootTitle:e.mootTitle});var s=new b(r,n.path+"#"+n.key,t.extend(!0,{},n),a,!0);return r.page.emit("before:moot",s),a.call("createMoot",n,function(e){s.emit("key",e),s.seed.emit("key",e),r.page.one("moot",o).emit("moot",s,!0),s.is_followed=!0,s.emit("follow")})},createForum:function(e,n){var o=e.categories;return"string"==typeof o[0]&&(o=t.grep(o,function(e){return!!e}),e.categories=o=t.map(o,function(e){return{title:p(e.slice(0,40)),path:r.path+"/"+m(e)}})),a.call("createForum",e,function(){r.is_stub=!1,r.categories=o,r.emit("categories",o),u(n,r,o)})},getCategory:function(e){return e=e.split("#")[0],t.grep(r.categories,function(t){return t.path==e})[0]},setCategories:function(e,n){return t.map(e,function(e){e.title=p(e.title.slice(0,40)),e.path||(e.path=m(e.title)),-1==e.path.indexOf(r.path)&&(e.path=r.path+"/"+e.path)}),a.call("setCategories",{path:r.path,categories:e},function(){r.emit("categories",e),u(n,r,e)})},banned:function(e){return r.user.is_admin?a.call("bannedUsers",{forumname:r.name},function(t){e(t.map(function(e){return new k(r,e,a)}))}):void 0},update:function(e,t){return r.user.is_admin?(e.forumname=r.name,a.call("forumUpdate",e,function(){r.one("update",t).emit("update",e)})):void 0},reload:function(e){return e&&(e.moots||e.user)?r.emit("reload",e):i("reload"),r},log:function(e,n){n=t.extend({forum:r.path,page:r.page.path,user:r.user.email,version:r.version,url:location.href,ua:navigator.userAgent},n),a.call("log",{message:e,data:n})},destroy:function(){return r.emit("destroy",r).off("*"),a.destroy(),r.is_destroyed=!0,r}}),r.is_forum&&(e.show_title=!0),r.on("before:init",function(){a||(a=new o({url:l,transports:e.transports,secure:true&&(!t.browser.msie||"https"==e.pageUrl.slice(0,5))}),r.channel=new h(r,a),a.reconnect(r.reload),r.page=new w(r,l.path,a),e.path&&(r.is_forum||c&&e.path.split(/[:#]/)[1])&&(r.page=new w(r,e.path,a))),r.page.is_init=!0,e.pageUrl.split("file://")[1]&&(e.pageUrl="https://moot.it"+r.path),i("init")}).on("init",function(e){r.page.is_init=!0,t.extend(r,e),r.is_stub=!e.moots,r.user=new y(r,e.user,a),r.emit("ready",r,a),r.emit("before:load",r.page),r.page.emit("load",e.moots),r.emit("load",r.page),delete r.moots}).on("load",function(e){r.page=e}).on("reload",function(e){r.page.emit("reload",e.moots)}).on("categories",function(e){e&&(r.categories=e,r.is_stub=!1)})}function h(e,o){var i=n(this),a=e.conf().debug;o.ready(function(){i.time_offset=o.time_offset}),o.event("moot",function(t,n){t.from_channel=n.from_channel=!0;var a=new b(e,t,n,o),r=!!e.getCategory(t.path),l=e.page;e.is_forum&&r&&i.emit("moot",a),"feed"!=l.type&&("all"!=l.type&&(a.page.path+"/").slice(0,l.path.length+1)==l.path+"/"||l.title==a.seed.user.displayname||"all"==l.type&&r)&&(e.is_forum||i.emit("moot",a),l.emit("moot",a,!0))}).event("reply",function(t,n){var a=e.page.find(t);if(!a){if(e.is_commenting)return!1;if(e.is_threaded){if(t.split("#")[0]!=e.page.path)return!1}else if(!e.getCategory(t))return!1;a=new b(e,t,{},o)}n.from_channel=!0,n=new _(a,n,o),a.emit("reply",n),i.emit("reply",n)}).event("type",function(t,n){(e.is_forum&&e.getCategory(t)||e.page.path==t)&&i.emit("type",n,t);var o=e.page.find(t);o&&o.emit("type",n)}).event("like unlike remove spam unspam update",function(t,n,o){var a=e.page.find(n);a&&a.seed&&(a=a.seed),a&&a.emit(t,o,!0),i.emit(t,a||n,o)}).event("error",function(e,t){a&&console.error(arguments),i.emit("error",e,t)}).event("enter leave away return",function(e,t,n){i.emit(e,t,n)}).event("banned message",function(t,n){e.user.emit(t,n)}).event("login",function(t){e.user.emit("login",t.user),e.reload(t)}).event("join",function(t){e.user.emit("before:join",t)}).on("send",function(n,o,i){if(i){var a,r=t.now();t.each([3e3,5e3,8e3,12e3],function(o,l){setTimeout(function(){!a&&t.now()-r>l&&(0==o&&e.emit("waiting",n,i),i.emit("progress",o,l))},l)}),i.done(function(){a=1}).fail(function(){a=1})}}).ready(function(){i.session=o.session()}).on("close reconnect error",function(t){"r"==t[0]?e.one("reload",function(){i.emit(t)}):i.emit(t)}),a&&o.on("send",function(e,t){console.log(">",e,t&&1==t.length?t[0]:t)}).on("receive",function(e){e&&console.log("<",e.result||e.params||e)})}function v(e,n,o,i){var a=this,r=e.path,l=e.app.page,s=e.match_count>=0&&i;a.is_gap=!0,a.size=a.available=n,s&&(a.match_count=e.match_count,t.each(e.replies,function(){this.is_gap||a.match_count--})),a.more=function(i,s){if(!a.available)return u(s);var c=Math.min(a.available,Math.ceil(n/(10>n?1:27>n?2:4)),50),d=i?c:e.reply_count,p=i?1:c,m=i?0:e.replies.length-1;if(i)for(var f,g=0;e.replies.length>g&&(f=e.replies[g],f!=a);g++)d+=f.is_gap?f.available:1,p+=f.is_gap?f.available:1,m++;else{for(var f,g=m;g>=0;g--){if(f=e.replies[g],f==a){m++;break}d-=f.is_gap?f.available:1,m--}0>=m&&(m=1),p=d-p+1}var h={path:r,start:d,end:p};return a.match_count>0&&"search"==l.type&&(h.path+=l.title,delete h.end),o.call("moreReplies",h,function(n){n=t.map(n,function(t){var n=t.reply_count;return a.available-=n||1,!n&&a.match_count&&a.match_count--,n?new v(e,n,o):new _(e,t,o)}),0>a.available&&(a.available=0),e.one("more",s).emit("more",n,m)})}}function b(e,o,i,a,r){function l(){var t=e.user;if(r)throw Error("Not saved");if(!t.is_logged)throw Error("not logged");if(t.banned)throw Error("user:banned")}function s(n){var o=e.conf();return t.extend(n,{mootTitle:o.mootTitle||o.categoryName,pageTitle:o.categoryName,pageLocation:o.pageUrl})}var c,d=n(this),p=e.page;if("string"==typeof o){var g=o.split("#");o={page:e.getCategory(g[0])||{path:o,title:o},path:o}}r&&(o.is_expanded=!0),t.extend(d,o),t.extend(d,{app:e,replies:[],reply_count:d.reply_count||0,time:d.time||t.now(),has_replied:!!o.has_replied,is_followed:!!o.is_watched,is_expanded:!!o.is_expanded}),d.page=d.page||{},d.page.path=o.path.split("#")[0],r||i.user||e.is_commenting||(d.is_commenting=!0,i.user={}),d.seed=i=new _(d,i,a,r),d.is_own=r||i.user&&i.user.path==e.user.path,t.extend(d,{is_loaded:d.is_expanded,reply:function(e,n){l();var o=t.trim(e.body);if(!t.trim(o))throw Error("no content");if(c==o)throw Error("duplicate");c=o,e.body=o=f.fixBody(o,!0),e.key=m(o.join("")),e.watch=!0;var i=new _(d,e,a,!0);return d.emit("before:reply",i),e.path=d.seed.is_stub?p.path:d.path,s(e),a.call("reply",e,function(e){i.emit("key",e),d.one("reply",n).emit("reply",i),d.is_followed=!0,d.emit("follow")})},posts:function(){return t.grep([d.seed].concat(d.replies||[]),function(e){return!e.is_gap})},find:function(e){if(e){if(d.seed.key==e)return d.seed;e.split("#")[1]||(e=d.path+"/"+e);for(var t=0,n=d.posts(),o=n.length;o>t;t++)if(n[t].path==e)return n[t]}},expand:function(e){return d.toggle(!0,e)},collapse:function(e){return d.toggle(!1,e)},load:function(e){var t=d.path+("search"==p.type?"?"+p.title:"user"==p.type?p.path:"");return d.is_loaded?u(e,d):a.call("moot",t,function(t){d.one("load",e).emit("load",t).emit("expand")})},toggle:function(n,o){function i(){return d.one(r,o).emit(r)}if(t.isFunction(n)&&(o=n,n=void 0),"boolean"!=typeof n&&(n=!d.is_expanded),n==d.is_expanded)return u(o,d);if(n&&!d.is_loaded)return d.load(o);var r=n?"expand":"collapse";return e.user.is_logged?a.call(r+"Moot",d.path,i):i()},followToggle:function(e,n){if(l(),t.isFunction(e)&&(n=e,e=void 0),"boolean"!=typeof e&&(e=!d.is_followed),e==d.is_followed)return u(n,d,e);var o=d.path;return e&&(o=s({path:o})),a.call("moot"+(e?"Watch":"Unwatch"),o,function(){var t=e?"follow":"unfollow";d.is_followed=e,d.one(t,n).emit(t)})}}),d.on("key",function(e){r=!1,d.path=d.page.path+"#"+e}).on("load",function(e){d.is_loaded=d.is_expanded=!0,d.reply_count=e.reply_count,d.seed=new _(d,e.seed,a)}).on("load",o,function(e){var n=0;d.match_count=e.match_count,t.each(e.replies||[],function(e,t){var o=t.reply_count;d.replies.push(o?new v(d,o,a):new _(d,t,a)),n+=o||1}),d.is_expanded&&d.reply_count>n&&d.replies.unshift(new v(d,d.reply_count-n,a,!0))}).on("reply",function(e){d.lastReply=t.now(),d.reply_count++,e.is_own&&(d.has_replied=!0),d.is_loaded&&d.replies.push(e)}).on("edit remove",function(e,n){return c=null,n.is_seed?p.emit("remove",d):(d.replies=t.grep(d.replies,function(e){return e.path!=n.path}),d.reply_count--,void 0)}).on("more",function(e,t){[].splice.apply(d.replies,[t,0].concat(e))}).on("expand collapse",function(e){d.is_expanded="e"==e[0]}).on("reload",function(n){n&&(d.reply_count=n.reply_count,d.has_replied=!!n.has_replied,d.is_followed=!!n.is_followed,d.is_expanded?t.map([n.seed].concat(n.replies),function(t){var n=d.find(t.key);n?n.emit("reload",t):d.lastReply<t.time&&(t.from_channel=!0,n=new _(d,t,a),d.emit("reply",n),e.channel.emit("reply",n))}):n.is_expanded&&d.emit("load",n))}),e.user.on("logout",function(){d.has_replied=!1,d.emit("reload")})}function y(e,o,i){function a(){if(!l.is_logged)throw Error("must be logged")}function r(e){return e[0].toUpperCase()+e.slice(1)}var l=n(this),s=(e.path+"/feed",0);o.new_count=o.new_count||{all:0,feed:0},o.email||delete o.email,t.extend(l,{img:H,app:e,logout:function(t){return a(),i.call("logout",{path:e.page.path,expand_all:!e.conf().show_title},function(){l.emit("logout",l.path),u(t,l)})},join:function(e,t){if(l.is_logged)throw Error("already logged");return e.username=e.username.toLowerCase(),i.call("join",e,function(){u(t,l)})},update:function(t,n){return t.forumname=e.name,i.call("userUpdate",t,function(){t.url||l.emit("update",t),u(n,l)})},isAvailable:function(e,t){return i.call("isAvailable",e,t)},unfollowAll:function(){return i.call("forumUnwatch",e.path,function(){t.each(e.page,function(){this.is_followed=!1,this.emit("unfollow")})})},type:function(n,o,a){if(!l.is_logged||l.is_visible){var r=t.now();r-s>1e3*L&&(i.call("type",{path:o?o.path:e.page.path,size:n.length},a),s=r)}},hideToggle:function(t){return i.call("user"+(l.is_visible?"Hide":"Show"),function(){var n=l.is_visible=!l.is_visible;e.channel.emit(n?"enter":"leave",l),u(t,l,n)})}}),t.each(["email_confirm","account_confirm","password_reset","validationCode_send","resetCode_check"],function(t,n){var o=n.split("_");l[o[1]+r(o[0])]=function(t,n){return i.call(o[0]+r(o[1]),t,function(t){t&&t.moots&&e.reload(t),u(n,l,t)})}}),l.on("login logout",o,function(n,o){"logout"==n&&(o={displayname:"",img:H,banTime:0,path:"",new_count:{all:0,feed:0}}),t.extend(l,o),l.is_logged=!!o.path,t.map(["is_admin","unverified","is_visible"],function(e){l[e]=!!o[e]}),e.is_stub&&l.is_logged&&(o.is_admin=!0)}),l.on("update",function(e){delete e.email,t.extend(l,e)}).on("follow unfollow",function(e){l.subscription_count+="follow"==e?1:-1}).on("banned",function(e){l.banned=e}),e.on("load",function(e){l.emit("newcount",l.new_count),l.new_count[e.type]=0,"all"==e.type&&(l.new_count.feed=0)}),e.channel.on("moot reply",function(t,n){e.page.find(n.path)||(l.new_count.all++,l.emit("newcount",l.new_count))})}function w(e,o,i){var a=n(this);e.path&&o!=e.path&&o.slice(0,e.path.length+1)!=e.path+"/"&&(o=e.path+"/"+o),o=o.replace("//","/").replace(/[<>]/g,""),"/"==o.slice(-1)&&(o=o.slice(0,-1));var r=o.split("::");o=r[0],a.type=/\?/.test(o)?"search":/\/feed/.test(o)?"feed":o==e.path+"/spam"?"spam":/@/.test(o)?"user":2==o.split("/").length?"all":/[#:]/.test(o)?"moot":"page",t.extend(a,{app:e,path:o,extra:r[1],find:function(e){if(e){e=e.replace(":","#");for(var t,n=0;a.length>n;n++){if(t=a[n],t.path==e)return t;if(t=t.find(e))return t}}},more:function(t){if(a.available){a.emit("before:more");var n={path:a.path,start:a.length,expand_all:!e.conf().show_title};return i.call("moots",n,function(e){a.one("more",t).emit("more",e)})}},collapse:function(e){var n=t.grep(a,function(e){return e.is_expanded}),o=t.map(n,function(e){return e.path});return i.call("collapseMoot",o,function(){t.each(n,function(){this.emit("collapse",!0)}),u(e,a,n)})}}).on("load",function(n){if(e.is_stub)return!1;if(t.extend(a,n),!a.title){var r=t.trim(o.replace(/[\/-]/g," "));r=r[0].toUpperCase()+r.slice(1),a.title=r}"user"==a.type&&(a.user=new k(e,{path:a.title},i)),a.available=n.size,delete a.entries,e.is_commenting&&(n.entries[0]||n.entries.push({seed:{user:e.user},is_expanded:!0,path:o}),n.entries[0].seed.is_stub=!0)}).on("load more",function(n,o){t.each(o.entries,function(t,n){var o=new b(e,n,n.seed,i);a.emit("moot",o)}),a.available-=o.entries.length}).on("moot",function(e,t){a[t?"unshift":"push"](e)}).on("remove",function(e){var n;t.each(a,function(t,o){return o.path==e.path?(n=t,!1):void 0}),n>=0&&(a.splice(n,1),a.size--)}).on("reload",function(n){n&&t.map(n.entries,function(t){var n=a.find(t.path);t.from_channel=!0,n?n.emit("reload",t):a[0].lastReply<t.lastReply&&a.emit("moot",new b(e,t,t.seed,i),!0)})})}function _(e,o,i,a){function r(){if(!c.is_logged)throw Error("not logged");if(a)throw Error("not saved")}var l=n(this),s=e.app,c=s.user,d=s.conf(),p=!!o.title,m=e.path+(o.title||o.is_stub?"":"/"+o.key);a&&(o=t.extend({},o,{user:c})),o.body=o.body||[],p&&!d.show_title&&(o.body[0]=o.title+o.body[0]),o.user=new k(s,o.user,i),t.extend(l,o,{app:s,moot:e,path:m,key:o.key||m.split("#")[1],is_own:a||o.user.path==c.path,likes:0,is_expanded:!!o.body[1],is_loaded:!o.has_more||!!o.body[1],is_seed:p,is_new:!!o.from_channel||c.new_count.all>0&&o.is_new,is_liked:!!o.is_liked,like_count:o.like_count||0,meta:o.meta||{},time:o.time||t.now(),likeToggle:function(n,o){if(r(),t.isFunction(n)&&(o=n,n=void 0),void 0===n&&(n=!l.is_liked),n==l.is_liked)return u(o,l,c);var a=l.is_liked?"unlike":"like",s=m;return e.seed.is_stub&&n&&(s={pageLocation:d.pageUrl,mootTitle:d.mootTitle||d.categoryName,pageTitle:d.categoryName,path:m}),i.call(a,s,function(){l.one(a,o).emit(a,c),e.emit(a,l)})},like:function(e){return l.likeToggle(!0,e)},unlike:function(e){return l.likeToggle(!1,e)},setMeta:function(e,t){return r()&&i.call("setMeta",m,e,function(){l.one("meta",t).emit("meta",e)})},remove:function(e,t){var n=c.is_admin;if(!n&&!l.editTimeLeft())throw Error("No permission");return i.call("delete",{path:m,force:n},function(){t=t||"remove",l.one(t,e).emit(t)})},edit:function(e){return l.is_own&&l.remove(e,"edit")},editTimeLeft:function(){var n=60*L,o=n-(t.now()-l.time)/1e3,i=!e.replies.length||e.replies.slice(-1)[0]==l;return a?n:0>o||!l.is_own||l.like_count||!i?0:o},whoLikes:function(e){return l.likes?e.call(l,l.likes):i.call("whoLikes",m,function(t){l.likes=t||[],u(e,l,t)})},more:function(e){return l.is_loaded?u(e,l):i.call("more",m,function(t){l.one("more",e).emit("more",t)})},toggle:function(e,n){function o(){return l.one(a,n).emit(a)}if(t.isFunction(e)&&(n=e,e=void 0),void 0===e&&(e=!l.is_expanded),e===l.is_expanded)return u(n,l);if(e&&!l.is_loaded)return l.more(n);var a=e?"expand":"collapse";return c.is_logged?i.call(a+"Post",m,o):o()},expand:function(e){return l.toggle(!0,e)},collapse:function(e){return l.toggle(!1,e)}}).on("key",function(t){l.key=t,l.path=m=p?e.path:e.path+"/"+t,a=!1}).on("like",function(e){(e.is_logged||e.path==c.path)&&(l.is_liked=!0),l.likes&&l.likes.push(e),l.like_count++}).on("unlike",function(e){(e.is_logged||e.path==c.path)&&(l.is_liked=!1),l.likes&&(l.likes=t.grep(l.likes,function(e){return e.path!=c.path})),l.like_count--}).on("more",function(e){l.is_loaded=l.is_expanded=!0,l.body.push(e)}).on("expand collapse",function(e){l.is_expanded="expand"==e}).on("edit remove",function(t,n,o){e.emit(t,l,o)}).on("meta",function(e){t.extend(l.meta,e)}).on("update",function(e){t.extend(l,e)}).on("spam unspam",l.spam_level,function(e,t){if(l.spam_level=t,"inline"!=e&&(l.flag=e),-1==t)l.emit("remove");else if(t>=1){var n=20*L;l.body[0]=(l.body[0]||"").replace(/\n/g," "),l.body[0].length>n&&(l.body[1]=l.body[0].slice(n)+(l.body[1]||""),l.body[0]=l.body[0].slice(0,n)),l.is_expanded=!1}}).on("reload",function(e){l.is_expanded=!!e.is_expanded,l.is_liked=!!e.is_liked,l.is_new=!!e.is_new,l.is_own=e.user&&e.user.path==c.path}),t.each(["spam","unspam"],function(e,t){l[t]=function(e){return r(),i.call(t,m,function(n){l.one(t,e).emit(t,n)})}}),s.user.on("logout",function(){l.emit("reload",{is_expanded:l.is_expanded,is_liked:!1,is_new:!1})})}function k(e,n,o){function i(){if(!e.user.is_admin)throw Error("Must be admin")}var a=this;t.extend(a,n),a.username=(a.path||"").slice(1);for(var r=0,l=e.admins||[];l.length>r;r++)"@"+l[r].username==a.path&&(a.is_admin=!0);a.ban=function(t,n){return i(),o.call("banUser",{username:a.username,forumname:e.name,bantime:t},n)},a.unban=function(e){i(),a.ban(0,e)}}!function(e){if(!e.browser){var t=e.browser={},n=navigator.userAgent.toLowerCase(),o=/(chrome)[ \/]([\w.]+)/.exec(n)||/(webkit)[ \/]([\w.]+)/.exec(n)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(n)||/(msie) ([\w.]+)/.exec(n)||0>n.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(n)||[];o[1]&&(t[o[1]]=!0,t.version=o[2]||"0")}}(jQuery);var x="jsonrpc.session",T={},j=[];e||(window.RPC=o),T.ajax=function(e,n,o){var i=this,a={};t.extend(i,{send:function(n){t.post(e,n.replace(/\?\?/g,"?&quest;"),o,"json")},poll:function(e,r){i.destroy(),a=t.post(e,r,0,"json").done(function(t){o(t),t.error||i.poll(e,r)}).fail(function(e,t){n.is_destroyed||"abort"==t||n.close()})},destroy:function(){1==a.readyState&&a.abort()},ping:function(n){return t.ajax({url:e+"/ping",dataType:"text"}).done(n)}})},T.ajax.supported=t.support.cors,t.cookie2=function(e,t){var n=window.localStorage;try{return null===t?n.removeItem(e):t?n[e]=t:n[e]}catch(o){}},T.upgrade=function(e,n,o){var i,a=this,r=new T.ajax(e,n,o),l=T.websocket.supported;l&&(l=new T.websocket(e,n,o),n.one("receive",function(e){e.result&&l.ping(function(){i=!0,n.call("rpc.upgrade"),n.emit("upgrade",l)})})),n.on("close",function(){i=!1,n.one("receive",function(){l&&(i=!0),setTimeout(function(){n.call("rpc.upgrade")},1e3)})}),t.each(["send","close","poll","ping","destroy"],function(e,t){a[t]=function(){var e=(i?l:r)[t];return e?e.apply(null,arguments):a}})},T.upgrade.supported=t.support.cors||e;var C=e?require("ws"):window.WebSocket||window.MozWebSocket;if(T.websocket=function(e,n,o){var i,a,r=e.replace(/^http/,"ws"),l=this,s={};t.extend(l,{send:function(l,c){var u=s.readyState;if(0!==u){if(1==u)return l&&(s.send(l),a=l),c&&c();s=new C(r),window.mootsocket=s,s.onopen=function(){i=!1,u=s.readyState,s.onmessage=function(e){a=null,o(e.data)},s.onclose=function(){i||n.close()},s.onerror=function(i){u=s.readyState,n.log("socket error",{err:i,msg:l,state:u}),a&&t.post(e,a,o,"json").done(function(e){n.log("socket fix",{ret:e,msg:a})}),(2>u?s:n).close()},l&&s.send(l),c&&c()}}},destroy:function(){i=!0,1==s.readyState&&s.close()},ping:function(e){return l.send(null,e),{fail:t.noop,abort:t.noop}}})},T.websocket.supported=!!C,!e&&C){var q=navigator.userAgent.toLowerCase(),$=navigator.appVersion.split("Version/")[1];C&&t.browser.webkit&&!/chrome/.test(q)&&$&&"5.1.14">$.split(" ")[0]&&(T.websocket.supported=!1),t.browser.mozilla&&t(document).keydown(function(e){27==e.which&&e.preventDefault()})}T.xdomain=function(e,n,o){function i(e,n,o,i){var a=s[e];return a||(a=s[e]=new XDomainRequest,a.onerror=t.noop,a.ontimeout=t.noop,a.onprogress=t.noop),a.open(i||"post",e),a.onload=function(){var e=a.responseText;try{e=JSON.parse(e)}catch(t){}o(e)},a.send(n),a}var a,r=this,l={},s={};r.send=function(t){i(e,t,o)},r.destroy=function(){a&&(a=!1,l.abort())},r.poll=function(e,s){n.is_destroyed||(r.destroy(),a=!0,l=i(e,t.param(s),function(t){a=!1,o(t),setTimeout(function(){t.error||r.poll(e,s)},200)}),l.onerror=function(){console.error("xdomain",JSON.stringify(arguments[0])),n.is_destroyed||n.close()})},r.ping=function(t){var n=i(e+"/ping?"+Math.random(),"",t,"get");return{fail:function(e){n.onerror=e},abort:function(){n.abort()}}}},T.xdomain.supported=window.XDomainRequest,o(function(e){var t,n,o=3e4,i=this;i.conf,i.on("receive heartbeat",function(){t=+new Date}).on("close reconnect",function(e){i.is_closed="close"==e}).ready(function(){if("file:"!=location.protocol&&"localhost"!=location.hostname||navigator.onLine){var a;n=n||setInterval(function(){navigator.onLine!==!1||i.is_closed?i.is_closed===!0&&navigator.onLine!==!1?(a&&a.abort(),a=e.ping(i.reconnect)):i.is_closed||(t=t||+new Date,+new Date-t>o&&e.ping(function(){t=+new Date,i.poll()}).fail(i.close)):(e.destroy(),i.close())},1e3)}}).destroy(function(){clearInterval(n)})}),t.fn.jsonrpc=function(e){var n=0;return this.each(function(){var o=t(this),i="#multipart-rpc-"+n++,a=t(":input[name]",o),r=(t("<iframe/>",{name:i,src:"about:blank"}).hide().insertBefore(o),t("<input/>",{type:"hidden",name:"jsonrpc"}).appendTo(o)),l=t(window);o.attr({action:e.api,method:"post",target:i,enctype:"multipart/form-data"}),o.submit(function(){var n=e.params||{};a.filter(e.query||"*").each(function(){var e=t(this);this.disabled||(n[this.name]=e.is(":checkbox")?this.checked:e.val())}),a.prop("disabled",!0).filter(":file").each(function(){this.disabled=!this.value}),r.val(JSON.stringify({session:e.session,method:e.method,params:[n],jsonrpc:"2.1.0",transport:"iframe",id:i})),l.on("message."+i,function(e){try{var t=JSON.parse(e.originalEvent.data),n=t.result||t.error;t.id==i&&(a.prop("disabled",!1),o.trigger(t.result?"done":"fail",n).trigger("always",n),l.off("message."+i))}catch(e){}})})})};var A=1,S=26,D=36,O=38,U=700,F=128,I=72,L=2.718,E=e?require("url").parse:function(e){var t=document.createElement("a");t.href=e;var n=t.pathname;return"/"!=n[0]&&(n="/"+n),{href:e,pathname:n,port:1*t.port||"",hostname:t.hostname,hash:t.hash,search:t.search,protocol:t.protocol}};f.urlify=m;var N,W={};e?module.exports=f:window.moot=f;var H="//cloudinary-a.akamaihd.net/moot/image/upload/t_default-avatar/v1364433583/moot-default-avatar.jpg";w.prototype=[],f(function(e,n){function o(t){for(var n=0,o=e.online;o.length>n;n++)if(o[n].path==t)return n;return-1}e.users=e.users||{online:[]},e.anon_count=e.users.anon_count||0,e.online=t.map(e.users.online,function(t){return t.is_online=!0,new k(e,t,n)}),e.getUser=function(t){return e.online[o(t)]},e.channel.on("enter",function(t){t&&(t.is_online=!0,e.online.push(new k(e,t,n)))}).on("leave",function(t){if(t){var n=o(t.path);n>=0&&e.online.splice(n,1)}}).on("away return",function(t,n){n&&(n=e.getUser(n.path)),n&&(n.is_active="return"==t)}).on("enter leave away return",function(t,n,o){o>=0&&(e.anon_count=o)}),e.user.on("logout",function(t){e.anon_count++,e.channel.emit("leave",{path:t})}).on("login",function(){e.anon_count--,e.channel.emit("enter",this)})});var M=400*L,R=40*L,P=26*L,z=20,J=/\[#(.+)\/#\]/g,Q=/-{3,} *(\w*)/g;f.fixTitle=function(e){return e=t.trim(e).replace(J,"$1"),t.each(e.split(/\s+/g),function(t,n){n.length>P&&!/https?:\/\//.test(n)&&-1==n.indexOf("[")&&(e=e.replace(n,n.slice(0,P)+" "+n.slice(P)))}),e},f.fixBody=function(e,t){if(e=f.fixTitle(e).replace(/\n{2,}/g,"\n\n"),!t)return[e];var n=e.slice(0,M),o=e.slice(n.length);o.length&&R>o.length&&(n=e.slice(0,M-R));var i=z+n.split(Q).length/2,a=e.split("\n");return a.length>i&&(n=a.slice(0,i).join("\n").slice(0,M)),o=e.slice(n.length),n=[n],o&&n.push(o),n}}(!this.top,jQuery),!function(e,t){"use strict";function n(e){return e&&e.replace(F,function(e,t,n){return"8)"==n&&"\n"==t?t+n:"<i>"+t+U[n]+"</i>"})}
function o(e,t){return e&&(e=e.replace(D,"&lt;$1$2$3"),t&&(e=e.replace(O,"<mark>$1</mark>"))),e}function i(e){return e?e.replace(L,"&hellip;").replace(E,"&#8220;$1&#8221;").replace(N," &#8216;$1&#8217;"):""}function a(e){return e=i(e).replace(W,"<strong>$1</strong>").replace(M,"<em>$1</em>"),e=m(e),e=n(e)}function r(e){if(!e)return"";var n="";return t.each(e.split(H),function(e,t){n+=e%2?"<samp>"+t+"</samp>":a(t)}),n}function l(e){return e.replace(/<(\w{1,2})"([\w\- ]+)"([^>]*)>/g,function(e,t,n,o){return n="m-"+n.split(" ").join(" m-"),"<"+(z[t]||t)+' class="'+n+'"'+o+">"
}).replace(/<(\/?)(\w)>/g,function(e,t,n){return"<"+t+z[n]+">"})}function s(e){var n=t.now(),o=moot().channel.time_offset||0;10>n-e&&(e-=o);var i=new Date(n-o),a=moot.language,r=(i-e)/1e3,l=Math.floor(r/86400),s=Math.ceil(l/7),c=0>=l&&(60>r&&a.now||3600>r&&Math.floor(r/60)+a.min||86400>r&&Math.floor(r/3600)+a.hour)||30>l&&l+a.day||10>s&&s+a.week;if(c)return c;var u=new Date(e),d=u.getFullYear();return Q=Q||a.months.split(","),u.getDate()+" "+Q[u.getMonth()]+(d!=i.getFullYear()?" "+d:"")}function c(e){var t=""+new Date(e);return t.split("GMT")[0]}function u(e,t){return(X[e]=X[e]||Function("_","return '"+e.replace(/\{([^\}]+)\}/g,"'+ (_.$1 === undefined ? '' : _.$1) +'")+"'"))(t)}function d(e,n){var o=t.extend({},n||{},{l:moot.language}),i=$[e];o.time&&(o.prettyTime=s(o.time),o.fullTime=c(o.time));try{return u(i,o)}catch(a){console.error(e,i,a,o)}}function p(e,n){if(n){var o=n.replace(Y," ").split(K);n=o[1]||o[0]||e.replace(K,"")}if(e=e.replace(/<\/?mark>/g,"").replace(Y,"_"),e=e/*****/,G.test(e.split("?")[0])){var i="m-image",a=e.split("?")[0].split("/").slice(-1)[0];return e.split("flickr.com")[1]?i+=" m-flickr-link":e.split("dropbox.com")[1]&&(e=e.replace("www.dropbox","dl.dropbox"),i+=" m-dropbox-link"),a.length>27&&(a=a.slice(0,10)+"&hellip;"+a.slice(-18)),"<a class='"+i+"' href='"+e+"'>"+(n||a).replace(D," ")+"</a>"}var r=e,l="class='m-link";"http"!=e.slice(0,4)||e.split(location.host)[1]?(l+=" m-local-link",r=r.replace(RegExp("https?://"+location.host),"").replace(location.pathname,""),"#!/"==r.slice(0,3)&&(l+=" m-moot-link",e=r,r=r.slice(3)),l+="'"):(r=r.split("://")[1],t.each(Z,function(t,n){var t=e.indexOf(n);return-1!=t?("google.com"==n?(r=r.split("q="),r=r[1]?r[1].split("&")[0]:r[0]):(r=e.slice(t+n.length+1),/wikipedia/.test(n)?r=r.replace("_"," "):"d.pr"==n&&(l+=" m-image","+"!=e.slice(-1)?e+="+":r=r.slice(0,-1))),l+=" m-"+n.split(".")[0]+"-link'",!1):void 0}),l+="' target=_new "),r.length>40&&("/"==r.slice(-1)&&(r=r.slice(0,r.length-1)),r=r.split("/"),r=r[1]?r[0]+"/&hellip;/"+r.slice(-1)[0].slice(-27):r[0].slice(0,27)+"&hellip;");var s=e.slice(-1);return("."==s||","==s||")"==s&&-1==e.indexOf("("))&&(e=e.slice(0,-1)),"<a "+l+" href='"+e+"'>"+(n||r)+"</a>"}function m(e){return e.replace(B,function(e,t,n){return n=n.replace(/&#x2F;/g,"/"),n=n.split(/[\s\'\"]/)[0].replace(/&#\w+;?/g,""),n.toLowerCase().indexOf("script:")>=0?t:p(n,t)}).replace(V,function(e,t){if(t)return e;var n=e.split("&#82");return n[1]?p(n[0])+"&#82"+n[1]:p(e)})}
function f(e){return e?e.replace(/[\<\>]/g,""):""}function g(e,n,o){var i=window,a=(i.screenX||i.screenLeft)+(t(i).outerWidth()-n)/2,r=(i.screenY||i.screenTop)+50,l="left="+a+",top="+r+",status=0,scrollbars=0,menubar=0";i.open(e,"moot_popup",l+",width="+n+",height="+o)}function h(e){return e=parseInt(e,10),e>=10?e:"0"+e}function v(e){e=e||0;var t=(Math.floor(e/3600),Math.floor(e/60));return e-=60*t,t+":"+h(e)}function b(e,n,o){e&&e.length&&t("html, body").animate({scrollTop:e.offset().top-(n||200)},400,function(){e.mootboost(),o&&o()})}function y(e){var n=t(d("more")),o=n.eq(0),i=n.eq(2),a=n.eq(1),r=t("a",a).tooltip2({prefix:"m-",position:"right"}),l=t(".m-tooltip",r.eq(1)),s=t("em",r).text(e.available);return e.available>26&&(a.ac("big"),l.text(moot.language.show_new)),r.click(function(){var n=t(this).ac("loading"),r=n.hc("to-head"),c=r?o:i,u={};u[r?"paddingBottom":"paddingTop"]=75*Math.min(e.available,10),c.animate(u),e.more(r,function(o){n.rc("loading"),s.text(e.available),c.stop().css({padding:0}),r||o.reverse(),t.each(o,function(e,t){t=t.is_gap?y(t):_(t),t.is_gap||t.mootboost(),c[r?"append":"prepend"](t)}),10>e.available&&(a.rc("big"),l.text(moot.language.show_more)),e.available||a.remove()})}),n}function w(e,a){function r(e){return t.trim(e.join("").replace(O,"$1"))}function l(n){var o=t(".m-replies, .m-seed .m-body-wrap, .m-form",g);n?(g.ac("animating expanded").rc("collapsed"),o.mootslide(200,function(){g.rc("animating")})):o.slideUp(100,function(){g.rc("expanded").ac("collapsed"),t(this).css({display:""})}),e.is_expanded=n}function u(){var e;t(".m-seed, .m-reply:not(.m-preview)",g).each(function(){var n=t(this),o=t(".m-facelink img",this).attr("title");e&&o&&n.tc("followup",e===o),e=o})}var p=e.app,m=e.seed,f=window.moot.language,g=t(d("moot",t.extend({},e,m))),h=t(".m-replies",g);g.data("moot",e),e.root=g.mousemoved("moot-hover").tc("flat",!!e.is_commenting),g.prepend(_(m,!0));var v=t(".m-seed",g);return e.is_expanded||g.ac("collapsed"),e.on("expand",!0,function(){var n=t(".m-follow",v).tooltip2({prefix:"m-"}).click(function(){return n.ac("loading"),e.followToggle(),!1})}).on("follow unfollow expand reload",!0,function(n){var o=e.is_followed;t(".m-follow",v).rc("loading hovered").tc("followed",o).find(".m-tooltip").text(f[o?"unwatch":"watch"]),/follow/.test(n)&&p.user.emit(n)}),e.on("load",e.is_expanded,function(n){var o="load"==n||n.seed;if(g.ac("expanded").rc("loading collapsed"),o){var i=_(e.seed,!0);v.replaceWith(i),m.root=v=i}t.each(e.replies,function(e,t){h.append(t.is_gap?y(t):_(t))}),o&&(l(!0),u())}).on("collapse",function(e){e&&l(!1),t(".m-new_count",v).hide()}).on("edit",function(e){var n=e.is_seed?t(".m-create textarea",p.root):t("textarea",g);e.is_seed&&(n.eq(0).val(r([e.title])),g.remove()),n.last().val(r(e.body)),n.keydown().keyup(),n[0].select()}).on("before:reply",function(e){p.user.is_admin||t(".m-remove",g).remove(),_(e).appendTo(h),e.root.ac("created"),e.on("key",function(){setTimeout(function(){e.root.rc("created")},500)})}).on("reply",function(n){n.from_channel&&e.is_loaded&&(p.user.is_admin||t(".m-remove",g).remove(),_(n).appendTo(h).mootslide()),n.is_own&&t(".m-is-new",g).rc("is-new")}).on("type",function(n){var o=t("<em/>").ac("typing").appendTo(t(".m-actions:first",g)),i=t(".m-writing",g);e.is_expanded&&i.html(d("writing",{user:n})),setTimeout(function(){o.remove(),i.empty()},1e3*et)}).on("*",!0,function(r){if("type"!=r){var l=e.reply_count,d=(e.new_count,(e.is_expanded?m.time:e.lastReply)||m.time);t(".m-reply_count",v).toggle(l>0).text(l).tc("has_replied",!!e.has_replied),p.is_commenting&&(l&&t(".m-comment_count",g).text(l+" "+f["comm_count_"+(l>1?"n":"1")]),g.tc("first-comment",!l),m.like_count||m.is_liked||t(".m-like",m.root).text(f.likepost)),t(".m-time",v).text(s(d)).attr({title:c(d),"data-time":d}).tooltip2({prefix:"m-",timeout:500}),t(".m-title",v).html(n(i(o(m.title,"search"==a.type)))),e.page&&p.is_forum&&t(".m-cat",v).html(f.in_forum+" <a>"+e.page.title+"</a>").find("a").click(function(){return e.is_expanded?(p.load(e.page.path),!1):void 0}),u()}}),p.is_commenting||"moot"==a.type||g.on("click",".m-title",function(){var t=window.getSelection;if(!(t&&""+t()||g.hc("loading"))){var n=e.is_loaded;e.is_expanded?(e.collapse(),n&&l(!1)):(e.expand(),n?l(!0):g.ac("loading"))}}),g}function _(e,n){function o(e,n,o){var i=t(d("prompt")).appendTo(r.root).active2("m-").trigger("open");t(".m-h2",i).text(n+"?"),window!=window.parent&&(i.css({position:"absolute",height:t(document).outerHeight()}),t(".m-panel",i).css({marginTop:t(e.target).offset().top-50})),t("button",i).click(o),t("a, button",i).click(function(){i.remove()})}function i(){s.tc("editable",e.editTimeLeft()>0&&e.is_own)}function a(e){var n=t("<span/>",{text:l.thanks}).ac("thanks badge").insertBefore(e);setTimeout(function(){n.remove()},3e3)}e.user.displayname=f(e.user.displayname);var r=e.app,l=moot.language,s=e.is_stub?t(".m-comment-head",r.root):t(d(n?"seed":"reply",e)),c=r.user,u=e.moot.match_count>=0;r.is_forum||t(".m-facelink",s).removeAttr("href"),e.uploads=j(e.body.join("")),t(".m-post",s).data("post",e),t(".m-time",s).attr("href","#!"+e.path.replace(r.path,"")).tooltip2({prefix:"m-",timeout:500}),e.user.is_admin&&t(".m-name",s).after(t("<span/>",{text:l.admin}).ac("admin")),e.root=s.mousemoved(),e.on("reload",e.is_new,function(){s.tc("is-new",e.is_new)}),t(".m-body",s).on("render",function(){function n(t){o.html(moot.format(e.body,t,u)),i.tc("closed",!t).tc("opened",t),a.html((t?l.less:"")+"&hellip;"),r.emit("format",o,e)}var o=t(this),i=o.parent(),a=t(".m-show-all",i),s=e.is_expanded;o.html(moot.format(e.body,s,u)),r.emit("format",o,e),(e.has_more||e.body[1])&&(i.ac("expandable "+(s?"opened":"closed")),a.html((s?l.less:"")+"&hellip;").click(function(){e.is_loaded?n(!e.is_expanded):a.ac("loading"),e.toggle(!e.is_expanded)})),e.on("more",function(){a.rc("loading"),n(!0)})}).trigger("render"),t(".m-heart",s).each(function(){function n(n,a){arguments.length||(n=e.like_count,a=!!e.is_liked);var r=n;a&&(n--,r=n?"+"+n:""),i.text(a?l.unlike:l.like),o.tc("has-likes",!a&&n>0).tc("is-liked",a).toggle(!!n||a),t("strong",o).text(n?r:"")}var o=t(this),i=t(".m-like",s),a=t(".m-like_list",s).active2("m-");i.click(function(){if(c.is_logged&&!c.banned){var t=!e.is_liked;n(e.like_count+(t?1:-1),t),e.likeToggle()}}),e.on("like unlike reload",!0,function(e){n(),"inline"!=e&&o.mootboost()}),o.click(function(){o.ac("loading"),a.empty(),e.whoLikes(function(e){var n=o.rc("loading").offset();t.each(e,function(){a.append(d(r.is_forum?"face":"img",{user:this}))}),a.trigger("open").css({opacity:0}),setTimeout(function(){var e=n.left,t=a.outerWidth()/2,i=n.left>t;i&&(e+=o.outerWidth()/4-t),a.tc("edged",!i).css({opacity:""}).offset({top:n.top-a.outerHeight()-o.outerHeight()/2,left:e},10)})})})}),t(".m-action[title]",s).tooltip2({prefix:"m-"}),t(".m-remove",s).click(function(t){o(t,l.removepost,function(){s.ac("loading"),e.remove(function(){setTimeout(function(){s.remove()},400)})})});var p=t(".m-edit",s).click(function(){e.edit(),s.remove()}),m=e.editTimeLeft();if(m>0)var g=setInterval(function(){t(".m-tooltip",p).text(l.undo+" "+v(m--)),0>m&&(s.rc("editable"),clearInterval(g))},1e3);e.on("reload like",!0,i),e.moot.on("reply",i);var h=t(".m-spam",s).click(function(t){o(t,l.mark,function(){e.spam(),a(h)})}),b=t(".m-unspam",s).click(function(){e.unspam(),a(b)});return e.on("spam unspam",e.spam_level,function(n,o){var i=o>=1;s.tc("is-spam",i),e.is_seed&&e.moot.root.tc("is-spam",i),i&&!s.hc("is-spam")&&t(".m-body",s).trigger("render")}),c.on("login",!0,function(){var t=e.user.path==c.path;h.toggle(!t),e.spam_level&&b.toggle(!t)}),r.emit("post",e),s}function k(e,n){var o=t("textarea",e),i=o.eq(0),a=o.last();moot.language,o.placeholder2("m-").keydown(function(n){var o=n.which;return 27==o?i.trigger("away").blur():(13==o&&(n.ctrlKey||n.metaKey)&&(n.preventDefault(),t("button",e).click()),void 0)}).focus(function(){t(document).one("mousedown",function(n){t(n.target).closest(e)[0]||i.trigger("away")})}).keypress(function(t){String.fromCharCode(t.which)&&n.user.type(i.val()+a.val(),e.closest(".m-moot").data("moot"))}),a.keydown(function(e){var t=e.which,n=this,o=n.selectionStart,i=n.value;9!=t||!o||e.ctrlKey||e.shiftKey||(e.preventDefault(),n.value=i.substring(0,o)+"   "+i.substring(n.selectionEnd),n.focus(),n.selectionEnd=o+3),86==e.which&&(e.ctrlKey||e.metaKey)&&setTimeout(function(){a.keyup().keydown()},50)});var r=t(".m-help",e).active2({prefix:"m-",trigger:t(".m-show-help",e)},function(){o[1]||r.css({top:-r.outerHeight()-10})});t.cookie2("moot.tip")||i.one("click",function(){r.trigger("open"),t.cookie2("moot.tip",1)}),i.trigger("away"),x(e,i,a,n),T(e,a,n)}function x(e,a,r,l){var s=e.hc("create"),c=t(d("preview")).appendTo(e).ac(s?"seed":"reply"),u=t(".m-title",c),p=t(".m-body",c),m=t(".m-name",c),f=moot.language,g=l.user,h=p.parent(),v=p.next().html("&hellip;");g.on("login logout",!0,function(){t(".m-face",c).attr("src",g.img),m.text(g.displayname),g.is_admin?m.after(t("<span/>",{text:f.admin}).ac("admin")):m.next(".m-admin").remove()}),a.add(r).keyup(function(){e.tc("filled",!!t(this).val())}),l.conf().show_title&&s&&(u.text(f.untitled),a.keyup(function(e){if(-1==t.inArray(e.which,ot)){var a=n(i(o(moot.fixTitle(this.value),!1)));u.html(a?a:f.untitled)}})),r.keyup(function(e){if(-1==t.inArray(e.which,ot)){var n=t(this).val(),o=h.hc("opened"),i=moot.fixBody(n,!o),a=!!i[1]||o;p.html(moot.format(i.slice(0,o?2:1))),l.emit("format",p,{uploads:j(i.join(""))}),h.tc("expandable",a)}}),a.add(r).keydown(function(e){if(86==e.which&&(e.ctrlKey||e.metaKey)){var n=t(this);setTimeout(function(){n.trigger("keyup")},10)}}),v.click(function(){h.tc("closed opened"),v.html((h.hc("opened")?f.less:"")+"&hellip;"),r.triggerHandler("keyup")}),a.on("away",function(){a.add(r).trigger("keyup")})}function T(e,n,o){function i(o){o.preventDefault();var i=o.target.files||o.originalEvent.dataTransfer.files||[];t.each(i,function(o,l){var c=/image/.test(l.type),u=4e6>l.size;if(c&&u){s.hide();var d=new FileReader;d.onload=function(e){var a=l.name.replace(/[^\w\.]/g,"").toLowerCase(),s=l.name.split("."),c=s[0],u=it[a];if(l.altname=a,l.data=e.target.result,u&&u.data!=l.data&&(c=s[0]+"-"+o,a="file_"+o+a,l.altname=a),c=f(c),n[0].value+=" ["+c[0].toUpperCase()+c.slice(1)+"]("+a+")",it[a]=l,o==i.length-1){var d=t.trim(n.val())+" ";n.keyup().focus().val("").val(d)}r.val("")},d.readAsDataURL(l)}else s[0]||(s=t("<div/>").ac("tooltip imgtip").prependTo(e)),s.show().text(c?a.max:a.img_needed)})}if(o.conf().upload===!1&&(at=!1),at){var a=moot.language,r=t("<input/>",{type:"file",multiple:"multiple",accept:"image/*"}).ac("hidden").appendTo(e),l=t("<a/>",{title:a.upload}).ac("post-upload").append("<em>U</em>"),s=t(".m-imgtip",e);l.prependTo(t(".m-controls",e)).tooltip2({prefix:"m-",position:"topleft"}),r.change(i),l.click(function(){r.click()}),e.on("drop",i).on("dragover dragleave drop",function(t){t.preventDefault(),e.tc("dragged",/over/.test(t.type))})}}function j(e){var t=[];return at&&e&&e.replace(B,function(e,n,o){var i=it[o];i&&t.push(i)}),t}function C(e){return e&&e.replace(/["']/g,"")}function q(e){var t=ct.css({fontFamily:"'"+e+"'"}).appendTo("body").width();ct.css({fontFamily:"'"+e+"', monospace"});var n=t==ct.width();return ct.remove(),n}var $={logo:'<div id="moot-logo" style="display: block !important"><a href="https://moot.it/" target="_new"><s"icon">m</s><s"slogan">{l.slogan}</s></a></d>',start:'<div id="mt-start"><d"h3">Start your own forum now &ndash; it&#39;s <r>free!</r></d><d"tooltip tip"></d><f><input type="text" name="name" class="m-input" placeholder="Reserve your forum name" maxlength="40" autocomplete="off"><b>Create</b></f><div id="mt-foot"><r>Free account</r> – <a"upgrade" href="https://moot.it/pricing/?{name}">upgrade</a> (and remove this dialogue) </d></d>',online:'<d"users"><d"h3 users-title">{l.online}<em/></d><d"logged-users"/><d"anon-count"/></d>',forum:'<d"header"><d"wrap"><d"table"><d"navi"><a"nav-feed" href="#!/feed"><s>{l.feed}</s><em"newcount"/></a><a"nav-all" href="#!/"><s>{l.all}</s><em"newcount"/></a><a"nav-forums"><s>{l.forums}</s></a><a"nav-online"><s>{l.online}</s><em/></a></d><d"subnavi"><d"search" id="m-search"><input type="text" name="q" placeholder="{l.search}"></d> @account; </d></d></d></d><d"wrap"> @page; <d"sidebar"><d"forums-wrap"><d"h3 forums-title">{l.forums}</d><d"forums links"/><d"custom links"/><d"admin-area"/></d></d> @logo;</d>',commenting:'<d"comment-head"><d"comment-meta"><d"seed"><a"action heart"><s>a</s><strong/></a><a"like"/><a"follow"><s"icon">e</s><strong/></a></d><d"like_list"/> @account; </d><d"comment_count"/></d>@page;@logo;',threaded:"@account;@page;@logo;",page:'<p"message"/><d"page"><d"pagetitle"><div/></d><s"loading-text">{l.loading}</s><d"form create"> @help; </d><p"collapse-all"><a><em"icon">u</em> {l.collapse}</a></p><d"list"/><b"more-moots button"/></d>',share:'<div id="m-share"><a id="m-share-fb">f</a><a id="m-share-tw">j</a><a id="m-quot">"</a><a id="m-link">1</a></d>',navi:'<p><a href="{href}">{title}</a></p>',admin:'<d"h3 manage-title">{l.manage}</d><d"links"><p><a"nav-settings">{l.settings}</a></p><p><a"nav-spam" href="#!/spam">{l.spam}</a></p><p><a"nav-designer">{l.design}</a></p><p><a"nav-banners">{l.ban_usr}</a></p></d><d"banlist"></d><d"subs"><d"h3 subs-title">{l.addons}</d><d"links"><p"sub-branding" data-name="designer">{l.designer}</p><p"sub-sso" data-name="developer">{l.developer}</p></d><a"upgrade button">{l.add}&hellip;</a><a"upgrade learn-more" data-name="all">{l.learn}</a></d>',gallery:'<div id="m-gallery"><a"close">x</a><nav id="m-navi"/><div id="m-media"><img id="m-img"/><div/></d></d>',browser:'<d"h2">{l.slogan}</d><a href="https://moot.it"><img src="//moot.it/m/img/home/allscreensizes.png"/></a><p><a href="http://browsehappy.com/">{l.upgrade}</a> {l.upgrade2}</p>',unverified:'<p"msg unverified"><em>{l.unver1}</em> {l.unver2}</p>',banned:'<p"msg ban-msg"><em>{l.ban_acc}</em> {l.ban_msg}</p>',ban:'<f"banning"><a"ban">{l.ban}</a><d><s"badge">{l.banned} <a"unban">x</a></s><l"days"><input type="text" value="21"> {l.days}</l><l"cb"><input type="checkbox"> {l.forever}</l></d></f>',img:'<i"face" src="{user.img}" title="{user.displayname}">',face:'<a"facelink" href="#!/{user.path}" data-href="#!/{user.path}" title="{user.displayname}">@img;</a>',growl:'<d"growl"><a"destroy">x</a><d"entries"/></d><s"growlicon">L</s>',event:'<d"entry" data-path="{path}"> @face; <d"data"><d"meta"><r"name">{user.displayname}</r><s"time" data-time="{time}" title="{fullTime}">{prettyTime}</s></d><a"link">{title}</a></d></d>',help:'<a"show-help">?</a><d"help"><a"close">x</a><d"help-format"><d"help-bolded">*<s>{l.bold}</s>* ({l.single})</d><d"help-italics">_<s>{l.italics}</s>_</d><d>&gt; <s>{l.help3}</s></d><d"help-monospaced">`<s>{l.monospaced}</s>`</d><d>[<s>{l.title}</s>](<s>{l.link}</s>)</d></d><d"help-code"><d>&#45;&#45;&#45;</d> {l.help5} <d>&#45;&#45;&#45;</d><d>&#45;&#45;&#45; html</d> &lt;p&gt;{l.help6}&lt;/p&gt; <d>&#45;&#45;&#45;</d></d><d"help-post"><em>ctrl</em> + <em>&crarr;</em><s>&nbsp; {l.help2}</s></d></d>',meta:'<d"meta"><s"name">{user.displayname}</s><a"time" data-time="{time}" title="{fullTime}">{prettyTime}</a><s"cat"/><s"spammed">{l.spam}</s><s"actions"><s"reply_count"/><a"action heart"><s>a</s><strong/></a><a"follow"><s"icon">e</s></a><a"action edit" title="{l.edit}"><s"icon">i</s></a><a"action remove" title="{l.removepost}"><s"icon">x</s></a><a"action spam" title="{l.mark}"><s"icon">!</s></a></s></d><d"like_list"/>',body:'<d"body-wrap"><d"body"/><a"show-all"/><a"action like"/><a"action unspam">{l.unspam}</a></d>',seed:'<d"seed"> @face; <d"post"> @meta; <a"menu icon">0</a><d"title"></d> @body; </d></d>',reply:'<d"reply"> @face; <d"post"> @meta; @body; </d></d>',prompt:'<d"mask prompt"><d"panel"><d"h2"/><b>{l.yes}</b><a>{l.cancel}</a></d></d>',more:'<d"head"/><d"get-replies"><a"to-head button" title="{l.show_old}"/><a"to-tail button" title="{l.show_more}"><em/></a></d><d"tail"/>',preview:'<d"preview expanded"><d"facelink"><i"face"><s"typing"/></d><d"post closed"><s"preview-title">{l.preview}</s><d"meta"><s"name"/><s"time">{l.now}</s></d><d"title"/> @body; </d></d>',moot:'<d"moot"><d"replies"/><d"form replyform"> @help; <t"postinput" rows="1" placeholder="{l.reply}"/><d"controls"><button title="{l.enter}">{l.replybtn}</b></d><d"writing"/></d></d>',writing:'<d"facewrap"> @img; <em"typing"/></d><s>{user.displayname} {l.writing}</s>',create:'<d"input-wrap"><t"input-title" rows="1"></t><t"input-body" rows="1"></t></d><d"controls"><d"select"><l>{l.select}</l><d"options"><r>{l.select}</r><ul/></d><input/></d><button title="{l.enter}"/></d>',no_title:'<t"postinput" rows="1" placeholder="{l.comment}"/><d"controls"><button title="{l.enter}"/></d>',account:'<d"nav-account"><a"login">{l.login}</a><a"me"><s"myname"/><em"down">5</em>@img; </a></d>',account_overlay:'<d"account overlay"><a"close">x</a><i"face"/><f"upload" target="m-upload" title="{l.avatar}"><input type="file" name="img" size="1"><b>x</b></f><d"names"><d"h3"><strong/> &bull; <a"logout">{l.logout}</a></d><d"h2"/><p"status"><s>o</s><em/> &bull; <a/></p></d><f><d"h3">{l.name}</d><s"error"/><input type="text" class="m-input" name="displayname" maxlength="50"><p"right">{l.nametip}</p></f><f><d"email-updated"><d"h3">{l.step}</d><p>{l.step1}</p></d><d"field email"><d"h3">{l.email}</d><s"error"/><input name="email" class="m-input" type="email" maxlength="100"><p"right">{l.emailtip}</p></d></f><p"unfollow"><s>e</s><em/> &bull; <a>{l.unwall}</a></p><p"acc-footer"><a"my-account" href="https://moot.it/account/" target="_new">{l.myaccount}</a><a"password">{l.changepw}</a></p></d>',join:'<d"mask join-mask"><d"panel moot-join"><d"h2">{l.welcome}!</d><p>{l.welcome1}</p><b>{l.later}</b></d></d>',social_join:'<d"mask join-mask"><f"panel join"><i"face" /><d"h2">{l.welcome}, <span/>!</d><d"h3">{l.welcome2}</d><l"field username"><input name="username" class="m-input" required="required" placeholder="your-username" maxlength="40"><em"tip">{l.unametip}</em></l><l"terms"><input type="checkbox" name="terms" required="required" /> {l.terms} </l><p><button disabled>{l.join}</b></p></f></d>',confirm_password:'<d"h2">{l.changepw}</d><br><p><b>{l.change}</b></p>',confirm_email:'<d"h2">{l.c_email}</d><d"h3"/><p><b>{l.ok}</b></p>',confirm_account:'<d"h2">{l.c_acc}</d><d"h3">{l.c_acc1}</d><p><b>{l.ok}</b></p>',expired:'<d"h2">{l.expired}</d><p>{l.expired1}</p><p><b>{l.ok}</b></p>',confirm_error:'<d"h2"/><p><b>{l.ok}</b></p>'};!function(){var e=t(document),n=[];e.on("keydown",function(e){if(27==e.which){var t=n.pop();t&&t.trigger("close")}}),t.fn.active2=function(o,i){function a(d){r.add(c).toggleClass(s,d),t("body").toggleClass(l+"overlaid",d),d?(n.push(r),i&&i(r,c),o.close_on_click&&e.on("mouseup"+u,function(e){t(e.target).closest(r.add(c))[0]||a(!1)})):e.off("mouseup"+u)}o=t.extend({prefix:"is-",close_on_click:!0},"string"==typeof o?{prefix:o}:o);var r=this,l=o.prefix,s=l+"active",c=o.trigger||t(),u=(""+Math.random()).slice(1);return c.click(function(){a(!r.hasClass(s))}),r.on("open close",function(e){e.isDefaultPrevented()||(a("o"==e.type[0]),e.stopPropagation())}),t("."+l+"close",r).click(function(){r.trigger("close")}),r}}(),t.fn.autogrow=function(e){var n="minHeight,maxHeight,fontSize,fontFamily,lineHeight,fontWeight,padding".split(",");return this.each(function(){e=e||0;var o,i=t(this),a=i.next(".jqt-shadow"),r=i.is("textarea");i.one("keydown",function(){a=t("<"+(r?"div":"span")+"/>").attr("class","jqt-shadow").insertAfter(i),t.each(n,function(e,t){a.css(t,i.css(t))}),a.css({position:"fixed",top:"-9999em"}),r&&a.width(i.width()),o=i.outerHeight()}).keydown(function(){setTimeout(function(){var t=i.val();a.html(t?t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&/g,"&amp;").replace(/\n$/,"<br/>&nbsp;").replace(/\n/g,"<br/>").replace(" ","&nbsp;"):"-"),r?i.outerHeight(t?a.outerHeight()+e:o):i.width(a.outerWidth())},1)})})},t.fn.changed2=function(){return t(":input[name]",this).change(function(){t(this).data("changed2",!0)}),this},t.expr[":"].changed=function(e){return!!t(e).data("changed2")},t.fn.toObject=function(){var e={};return this.each(function(){this.disabled||(e[this.name]=t(this).is(":checkbox")?this.checked:t(this).val())}),e},t.fn.mousemoved=function(e,n){e=e||"is-hover",n=n||3e3;var o,i=0,a=0;return"ontouchstart"in window?this.addClass(e):this.each(function(){var r=t(this);r.on("mouseenter mouseleave",function(l){if(!t(l.relatedTarget).data("skip-hover")){var s="mouseenter"==l.type;r.toggleClass(e,s),s?(r.on("mousemove.jqt",function(n){a-n.pageX&&(r.addClass(e),i=t.now(),a=n.pageX)}),o=setInterval(function(){t.now()-i>n&&(r.removeClass(e),i=t.now())},1e3)):(r.off("mousemove.jqt"),clearInterval(o))}})})};var A="placeholder"in document.createElement("input");t.fn.placeholder2=function(e){return e=e||"",A?this:this.each(function(){var n=t(this),o=t("<span/>",{"class":e+"placeholder",text:n.attr("placeholder")});n.after(o).keyup(function(){n.parent().toggleClass(e+"filled",!!n.val())}),o.click(function(){n[0].focus()})})},t.fn.sel2=function(e,n){var o=e.prefix||"";return this.each(function(){function e(e){e=e||t("."+d,c),e.removeClass(d)}function i(e){r.trigger("select",[e]).trigger("close")}var a,r=t(this).active2(o),l=r.data("api"),s=t(document),c=t("div",r),u=o+"selected",d=o+"hovered";return l?l:(r.on("open",n).click(function(){r.trigger("open"),s.bind("keydown.s2",function(n){var o=n.which,a=40==o,r=t("."+d,c);(a||38==o)&&(r.length?(e(r),r=a?r.next():r.prev()):r=t("li:"+(a?"first":"last"),c));var l=String.fromCharCode(o);if(l&&"("!=l&&"&"!=l){var s=t("li",c).filter(function(){return t(this).text()[0].toLowerCase()==l.toLowerCase()}).eq(0);s[0]&&(e(),r=s)}if(r[0]){r.addClass(d);var u=r.position().top;(0>u||u>c.height())&&c.scrollTop(c.scrollTop()+(0>u?-1:1)*c.height()),(13==o||32==o)&&i(r)}n.preventDefault()})}),r.bind("close",function(){s.unbind("keydown.s2")}),r.on("select",function(e,n){"number"==typeof n&&(n=t("li",c).eq(n));var o=n.data("value");void 0===o&&(o=n.text()),t("."+u,c).removeClass(u),n&&n.addClass(u),r.toggleClass("is-defined",!!o),t("input",r).val(o).trigger("change"),t("label",r).html(n?n.html():o),r.data("value",o),a=o}),c.on("click","li",function(e){return i(t(e.target).closest("li")),!1}).on("mouseenter mouseleave","li",function(n){e(),t(n.target).toggleClass(d,/ee/.test(n.type))}),r.data("api",{val:function(e){return void 0!==e?i(t("li:contains("+e+")",r)):a},index:function(e){return void 0!==e?i(t("li",c).eq(e)):t("li",c).index(t("."+u,c))}}),void 0)})},t.fn.tooltip2=function(e){var n=e.prefix||"",o=n+"tooltip",i=n+"hovered",a=e.position;return"ontouchstart"in window?this:this.each(function(){var n,r,l,s,c=t(this),n=t("."+o,c);n[0]||(n=t("<span/>",{"class":o}).appendTo(c)),n.text(c.attr("title")),c.removeAttr("title").bind("mouseenter.tip2 mouseleave.tip2",function(u){var d=/ee/.test(u.type);if(n=t("."+o,c),d){l=c.outerWidth(),r=n.outerWidth(),s=setTimeout(function(){c.addClass(i)},e.timeout||0);var p="topleft"==a?1:2,m="left"==a?{top:0,left:-r}:"right"==a?{top:"35%",left:l+5}:{top:-n.outerHeight(),left:-(r/p)+l/p};n.css(m)}else c.removeClass(i),clearTimeout(s)})})};var S=/(^|\n)[-`]{3,} *(\w*)/g,D=/<(\/?)([^3><]+)(>?)/g,O=/\[#([^\/]+)\/#\]/g,U={"<3":"a",":D":"D",":-D":"D",":d":"D",":-d":"D",":)":")",":-)":")",";)":";",";-)":";",":O":"O",":-O":"O",":o":"O",":-o":"O",":0":"O",":-0":"O",":*":"*",":-*":"*",":|":"|",":-|":"|",":(":"(",":-(":"(",":P":"P",":-P":"P",":p":"P",":-p":"P",":/":"/",":-/":"/",":'(":"'",":'-(":"'","8)":"8","8-)":"8",">:(":">",">:-(":">",">:O":"<",">:-O":"<",">:o":"<",">:-o":"<",">:0":"<",">:-0":"<"},F="";for(var I in U)F+=I.replace(/(\)|\||\*|\(|\/)/,"\\$1")+"|";F=RegExp("(^|\\s)("+F.slice(0,F.length-1)+")","g");
	var L=/\.{3,}/g,E=/\"([^\"]+)\"/g,N=/\s\'([^\']+)\'/g,/*******/W=/\*\*(.*?)\*\*/g,H=/`([^`]+)`/g,M=/\*([^\*]+)\*/g,R=/-{2,}/g,P=/ - /g;moot.format=function(e,n,i){var a,l=e.slice(0,n?2:1).join(""),s=l.split(S),c=!0,u="";return t.each(s,function(e,n){if(0===(e+1)%3)return a=n;if(0===e%3&&(c=!c),n=t.trim(n),!n)return"";if(c)return u+=hilite2(t.trim(n.replace(O,"<mark>$1</mark>")),a,"m-");n=o(n,i),n=r(n);var l,s=(n+"\n").split("\n");t.each(s,function(e,n){n=t.trim(n),">"==n.slice(0,1)?(l||(u+="<blockquote>"),n=t.trim(n.slice(1)),l=!0):l&&(u+="</blockquote>",l=!1),(n||0!=e&&e!=s.length-1)&&(u+=n?t.browser.msie&&9>t.browser.version?n:"<p>"+n+"</p>":"<p class=m-empty/>")})}),u};var z={a:"a",b:"button",c:"code",d:"div",e:"fieldset",f:"form",i:"img",j:"iframe",l:"label",p:"p",r:"strong",s:"span",t:"textarea"};t.each($,function(e,t){$[e]=l(t)});for(var J=0;2>J;J++)t.each($,function(e,t){$[e]=t.replace(/\s*@(\w+);\s*/g,function(e,t){return $[t]})});var Q,X={};moot.tmpl=function(e,t){return t=t||{l:moot.language},u(l(e),t)};var B=/\[([^\]]+)\]\(\s*([^\)]+)\s*\)/gi,K=/https?:\/\//,Y=/<\/?em>/g,V=/https?:\/\/[^\s\"\']+(\')?/gi,G=/(jpe?g|png|gif)$/i,Z=["facebook.com","wikipedia.org/wiki","twitter.com","github.com","google.com","vimeo.com","youtube.com/watch?v","youtu.be","d.pr","dropbox.com"];moot("format",function(e){t(".m-link",e).each(function(){var e=t(this);if("m-link"==e.attr("class")){var n=e.attr("href").split("/").slice(0,3).join("/");e.removeAttr("class").ac("favlink").prepend(t("<img/>",{src:"//icon.moot.it/"+n}))}})}),window.atob=window.atob||function(e){var t,n,o,i,a={},r=0,l=0,s="",c=String.fromCharCode,u=e.length,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(t=0;64>t;t++)a[d.charAt(t)]=t;for(o=0;u>o;o++)for(n=a[e.charAt(o)],r=(r<<6)+n,l+=6;l>=8;)((i=255&r>>>(l-=8))||u-2>o)&&(s+=c(i));return s},t.each(["add","remove","toggle","has"],function(e,n){t.fn[n[0]+"c"]=function(e,t){return this[n+"Class"]("m-"+e.split(" ").join(" m-"),t)}}),t.fn.mootslide=function(e,n){return e=e||100*et,this.each(function(){var o=t(this),i=o.css({opacity:0}).outerHeight();o.height(0).animate({height:i},e).animate({opacity:1,queue:!0},e,function(){o.css({height:"",opacity:""}),(n||t.noop)()})})},t.fn.mootboost=function(e){return this.each(function(){var n=t(this);n.ac("boosted"),setTimeout(function(){n.rc("boosted")},e||500*et)})};var et=2.718;moot(function(e){function n(e){i.tc("has-message","string"==typeof e),t(".m-message",i).text(e),e&&e.stack&&console.error(e.stack)}var o,i=e.root,a=e.conf(),r=moot.language;if(e.is_stub){if("available"!=e.forumAvailable)return i.empty();if(!/moot.it/.test(location.host))return i.html(e.name+" "+r.notexist+' <a style="display:block" href="https://moot.it/'+e.name+'">'+r.setup+" &raquo;</a>"),!1}t.each(["forum","threaded","commenting"],function(t,n){e["is_"+n]&&i.html(d(n,{user:e.user})).addClass("is-"+n)}),e.is_threaded&&a.show_online&&i.prepend(d("online")),location.hash.split("#!")[1]&&e.on("load",function(n){var o="unread"==e.page.extra?t(".m-reply:last.m-is-new:first, .m-replies > :last",i):i;n.is_init&&o[0]&&t("html, body").animate({scrollTop:o.offset().top-30},300)}),setInterval(function(){t("[data-time]",i).each(function(){var e=t(this),n=e.data("time"),o=t("span",e);n&&e.html(s(n)+(o[0]?o[0].outerHTML:""))})},1e4*et),e.on("error",n).on("waiting",function(e,t){t.on("progress",function(e){n(r.progress[e]),3==e&&(o=setTimeout(n,1e3))}).done(function(){clearTimeout(o),n()})}).on("destroy",function(){i.empty()}),e.channel.on("close reconnect",!0,function(e){n("close"==e?r.reconnect:"")}).on("type",function(e){e.img?e.displayname=f(e.displayname):(e.img="//i2.wp.com/cloudinary-a.akamaihd.net/moot/image/upload/t_d2-avatar/v1364433564/moot.jpg?ssl=1",e.displayname=r.someone)}),e.is_commenting&&(t(".m-create",i).remove(),i.on("click","a[href^='#!']",function(e){e.preventDefault()}))}),moot(function(e){function n(){e.is_commenting||setTimeout(function(){var n=t.grep(e.page,function(e){return e.is_expanded});r.parent().tc("shown",n.length>0)},1)}var o=e.root,i=t(".m-list",o),a="created",r=t(".m-collapse-all a",o).click(function(){e.page.collapse()}),l=t(".m-more-moots",o).click(function(){e.page.more()});e.is_commenting&&r.parent().remove(),e.on("before:load",function(o){l.hide(),o.on("load more",function(t){if(l.text(o.available).css("display",o.available>0?"block":"none"),n(t),!e.is_commenting){var i=o.find(o.path);i&&(i.seed||i).root.mootboost()}}).on("before:more more",function(e){l.tc("loading","more"!=e)}).on("before:moot",function(e){w(e,o).prependTo(i),e.root.ac(a)}).on("moot",function(r,l){if(r.root&&r.root.hc(a))setTimeout(function(){r.root.rc(a)},500*et);else if(l){var s=w(r,o).prependTo(i);r.from_channel&&s.mootslide()}else w(r,o).appendTo(i);r.on("expand collapse",n);var c=r.page;"moot"==o.type&&c.title&&!e.is_commenting&&t("<a/>",{text:c.title}).ac("back").appendTo(i).click(function(){e.load(c.path)}),e.emit("topic",r,l)}).on("remove",function(e){e.root.fadeOut(function(){e.root.remove()})})})}),moot(function(e){function n(e){var t=e.split("@"),n="#!/"+(t[1]?"@"+t[1]:e.split("/").slice(2).join("/"));return n}function o(e,n){t(".m-newcount",e).css({display:n>0?"inline-block":"none"}).text(n)}if(!e.is_commenting){var i=e.root,a=e.user,r=moot.language,l=t(".m-header",i),s=t(".m-page",i),c=t(".m-sidebar",i),u=(t(".m-navi",i),t(".m-nav-feed",i)),p=t(".m-forums-wrap",c),m=t(".m-forums",p),f=t(".m-forums-title",p),g=t(".m-custom",c),h=t(".m-nav-all",i),v=t(".m-list",i),b=t(".m-pagetitle div",i);if(i.on("click","a[href^='#!']",function(n){if(!e.is_forum&&t(n.target).hc("face"))return!1;if(!n.metaKey&&!n.ctrlKey){var o=t(this),i=o.attr("href").slice(3);if("feed"!=i||a.is_logged)return o.ac("loading"),e.load(i),!1
}}),p.active2({prefix:"m-",trigger:t(".m-nav-forums",l)},function(e,t){var n=t.offset();e.offset({top:n.top+t.outerHeight()+10,left:n.left-(e.outerWidth()-t.outerWidth())/2})}),a.on("login logout",!a.is_logged,function(){u.attr("title",a.is_logged?"":r.login1)}),e.html){g.html(e.html);var y,w=[];t("a",g).each(function(){var o=t(this),i=o.attr("href");if(!i||"#!/"==i.slice(0,3)){var a=e.path+"/"+(i?i.slice(3):moot.urlify(o.text())),r={title:o.text(),path:a,href:n(a)};o.replaceWith(d("navi",r)),delete r.href,a.split("#")[1]||o.hasClass("non-category")||(e.getCategory(a)||(y=!0),m.add(f).remove(),w.push(r))}}),w.length&&w.length!=e.categories.length&&(y=!0),a.is_admin&&y&&e.setCategories(w),t(".moot-footer",g).remove().appendTo(c)}m[0]?e.on("categories",e.categories,function(o){o=o||e.categories,m.empty(),t.each(o||[],function(e,o){o=t.extend({},o,{href:n(o.path)});var i=t(d("navi",o)).appendTo(m);t("a",i).tc("has-new",!!o.has_new)})}):f.remove(),p.on("click",".m-links a",function(){p.trigger("close")}),e.on("before:load",function(o){v.empty().ac("loading"),i.attr("class",t.trim(i.attr("class").replace(/m-\w+page/,""))),i.rc(e.page.type+"page"),b.html(r.loading).css("display",""),t(".m-selected",i).rc("selected"),t("[href='"+n(o.path)+"']",i).add(s).ac("loading")}).on("load",function(e){var o=t("#m-search input",i),a=e.title;v.rc("loading"),i.ac(e.type+"page"),b.text(a),t(".m-loading",i).rc("loading has-new"),t("[href='"+n(e.path)+"']",i).ac("selected"),o.on("focus blur",function(e){o.closest(".m-subnavi").tc("focus","f"==e.type[0])}),"search"==e.type?(e.length?(e.old_query&&b.html(r.showing+" &ldquo;<strong>"+a+"</strong>&rdquo;"+"<em>"+r.noresults+" &ldquo;"+e.old_query+"&rdquo;"),e.suggestion&&b.html("<strong>"+a+"</strong>"+"<em>"+r.mean+" <a href='#!/?"+e.suggestion+"'>"+e.suggestion+"</a>?")):b.html(r.noresults+" &ldquo;<strong>"+a+"</strong>&rdquo;"),o.val()!=b&&o.val(a).keyup()):o.val(""),e.size||"spam"!=e.type||b.append("<em>"+r.nospam+"</em>")}),a.on("newcount",function(e){o(u,e.feed),o(h,e.all),e.all||t(".m-has-new",c).rc("has-new")}),t("#m-search",l).each(function(){var n=t(this),o=t(":input",n).placeholder2("m-");o.keyup(function(n){if(13==n.which){var o=t.trim(this.value);o&&e.search(o)}}),t(".m-placeholder",n).click(function(){o.focus()})}),history.pushState&&(e.on("load",function(e){var t=e.path,o=n(t.replace("#",":")),i=location.hash.split("::")[0];e.is_init||"/"!=t[0]||o==i||history.pushState(null,null,o)}),t(window).on("popstate",function(){var t=unescape(location.hash.split("#!/")[1]||"");(t||e.page.path!=e.path)&&(e.page.is_init||e.load(t))}))}}),moot(function(e){if(!e.conf().show_title){var n=t(".m-create",e.root).append(d("no_title")),o=t("textarea",n).autogrow(10),i=moot.language,a=e.user,r=t("button",n);k(n,e),a.on("login logout",!0,function(){r.text(a.is_logged?i.post:i.login_and+" "+i.post.toLowerCase())}),o.on("focus away",function(e){n.tc("focused","f"==e.type[0]||!!o.val())}),r.click(function(n){n.preventDefault();var l=t.trim(o.val()),s=l.slice(0,27),c={title:s,body:l.slice(s.length)},u=j(l);l&&a.is_logged&&(o.val("").trigger("away").trigger("keydown").blur(),u[0]&&(c.files=u),r.prop("disabled",!0),e.create(c,function(){r.prop("disabled",!1)}).fail(function(n){t(".m-created",e.root).remove(),o.val(l).focus(),root.prepend(t("<div/>").ac("err tooltip").text(i.error)),c.error=n,e.log("error comment:failed",c)}))})}});var tt=/(iPad|iPhone|iPod)/g.test(navigator.userAgent),nt=80;moot(function(e){function n(){return h.is(":visible")&&!h.data("value")?(h.click(),m.prop("disabled",!0),h.one("select",function(){i(),m.click()}),!1):!0}function o(n,o){t(".m-created",e.root).remove(),l.val(n.title).focus(),s.val(n.body);var u="duplicate"==o.message?"Duplicate title":o.message?c.no_title:c.error;a.prepend(t("<div/>").ac("err tooltip").text(u)),n.error=o,e.log("error create:failed",n),r.one("keyup",i)}function i(){m.prop("disabled",!1),t(".m-tooltip",a).remove()}if(e.conf().show_title){var a=t(".m-create",e.root).append(d("create")),r=t("textarea",a),l=r.eq(0).autogrow(),s=r.eq(1).autogrow(1),c=moot.language,u=window.getSelection,p=e.user,m=t("button",a),f=e.conf();if(p.on("login logout",!0,function(){m.text(p.is_logged?c.post:c.login_and+" "+c.post.toLowerCase())}),e.is_sso&&!p.is_logged){var g=f.login_url?t("<a/>").attr("href",f.login_url):t("<div/>");return a.html(g.ac("sso-link").text(c.login_and+" "+c.start.toLowerCase()))}r.on("focus away drag",function(t){var n="f"==t.type[0],o=!!l.val();o||(l.attr("placeholder",c[n?"title":e.is_threaded?"comment":"start"]),s.attr("placeholder",n?c.body:"")),a.tc("focused",n||o||!!s.val())}).trigger("away"),k(a,e),l.keydown(function(e){if(!(""+(u&&u()))){var n=e.which;if(tt)return 13==n?!1:0;if(e.metaKey||e.ctrlKey)86==e.which&&setTimeout(function(){var e=t.trim(l.val()).split("\n"),n=e[0];n.length>nt&&(e[1]=n.slice(nt)+e[1],n=n.slice(0,nt)),l.val(n).keyup().keydown(),s.val(e.slice(1).join("\n")).keyup().keydown()},50);else{var o=this.value.length;if(13==n||o==this.selectionStart&&39==n||40==n)return s.focus(),!1;8!=n&&39!=n&&o>=nt&&s.focus()}}}),s.keydown(function(e){if(!(""+(u&&u()))){var t=e.which,n=this.selectionStart,o=this.value.substr(0,n).split("\n").length;return 1==o&&38==t||(37==t||8==t)&&!n?(l.focus(),!1):void 0}});var h=t(".m-select",a);e.on("categories",!0,function(){var n=t("ul",h).empty();t.each(e.categories||[],function(e,o){n.append(t("<li/>",{"data-value":o.path,text:o.title}))}),h.sel2({prefix:"m-"})}).on("before:load",function(e){t("li[data-value='"+e.path+"']",h).click()}),m.click(function(a){if(a.preventDefault(),i(),p.is_logged&&n()){var c=t.trim(s.val()),u={path:h.data("value"),title:l.val(),body:c},d=j(c);if(d[0]&&(u.files=d),e.is_forum&&"page"==e.page.type&&u.path!=e.page.path)return e.load(u.path,function(){m.click()});try{p.is_logged&&m.prop("disabled",!0),e.create(u,function(){r.val("").trigger("away").blur(),i()}).fail(function(e){o(u,e)})}catch(a){o(u,a)}}})}});var ot=[16,27,33,34,35,36,37,38,39,40,45,91];moot(function(e){e.channel.on("close reconnect",function(n){var o="c"==n[0];t("button, textarea",e.root).prop("disabled",o)})}),moot("topic",function(e){var n=t(".m-form",e.root),o=t("textarea",n).autogrow(),i=t("button",n),a=moot.language,r=e.app,l=r.user,s=r.conf(),c=r.is_commenting?a.post:a.replybtn;if(l.on("login logout",!0,function(){i.text((l.is_logged?"":a.login_and+" ")+c)}),r.is_sso&&!l.is_logged){n.html("<div class='m-writing'/>");var u=s.login_url?t("<a/>").attr("href",s.login_url):t("<div/>");return n.append(u.html(c+"&hellip;").ac("sso-link"))}k(n,r),o.on("focus away",function(e){n.tc("focused","f"==e.type[0]||!!o.val())}),e.seed.is_stub&&(o.attr("placeholder",e.replies.length?a.comment:a.comment1),e.one("reply",function(){o.attr("placeholder",a.comment)})),i.click(function(s){s.preventDefault(),t(".m-imgtip",n).hide();var c=t.trim(o.val()),u={body:c},d=j(c);c&&l.is_logged&&(o.val("").trigger("away").trigger("keydown").blur(),d[0]&&(u.files=d),i.prop("disabled",!0),e.reply(u,function(){t(":file",n).val(""),i.prop("disabled",!1)}).fail(function(i){t(".m-created",e.root).remove(),o.val(c).focus(),n.prepend(t("<div/>").ac("err tooltip").text(a.error)),r.log("error reply:failed",{moot:e.path,body:c,error:i})}))})});var it={},at="FormData"in window&&"File"in window;moot("load",function(){it={}}),moot(function(e){function n(a,r){if("undefined"==typeof _gat){if(o)return;return o=!0,t.getScript("//google-analytics.com/ga.js",function(){n(a,r)})}var l=_gat._createTracker(i);l&&l._trackEvent("Moot: "+a,r,e.user.path||"anonymous")}var o,i=e.analytics&&e.analytics.ga;i&&(e.user.on("login",function(){setTimeout(function(){n("login",e.page.path)},10)}),e.on("before:load",function(e){e.one("load",function(){n("load",e.title),"moot"==e.type&&n("topic",e.title)}),e.on("before:moot",function(e){n("post",e.seed.title)}).on("moot",function(e){e.on("load before:reply like",function(t){"load"==t&&(t="topic"),"before:reply"==t&&(t="post"),n(t,e.seed.title)})})}))}),moot.banning=function(e){function n(e){a.tc("active",!!e),e&&(e===!0||e>i?t("input",l).prop("checked",!0).keydown():t("input",r).val(parseInt(e/o)).keydown())}var o=86400,i=365*o,a=t(d("ban")),r=t(".m-days",a),l=t(".m-cb",a);return t("input",a).on("keydown change mouseup",function(){if(Number(this.value)>0)r.ac("active"),l.rc("active").find("input")[0].checked=!1;else{var e=this.checked;r.tc("active",!e),l.tc("active",e),e||t("input",r)[0].focus()}}).change(function(){var n=t("input",r),a=parseInt(n.val()),l=this.checked?10*i:a?o*(a+1):21*o;isNaN(a)&&n.val(21),l&&e.ban(l)}),t(".m-ban",a).click(function(){e.ban(10*i),n(!0)}),t(".m-unban",a).click(function(){e.unban(),n(!1)}),n(e.banTime),a},moot(function(e){e.on("load",function(){t(".m-banning",e.root).remove();var n=e.page;if(n&&"user"==n.type&&e.user.is_admin){var o=n.user;e.banned(function(i){t.map(i,function(e){e.path==n.title&&(o=e)}),moot.banning(o).insertAfter(t(".m-pagetitle",e.root))})}})});var rt;moot(function(e){function n(e,t){document.title=e.displayname+" "+t,setTimeout(function(){document.title=rt},i)}rt||(rt=document.title||t("title").text()||"");var o=e.is_forum,i=(e.user,1e3*et);e.channel.on("moot reply",function(e,t){t.seed&&(t=t.seed),t.path&&n(t.user," – "+(t.title||t.body[0]).slice(0,32))}).on("type",function(e){n(e,moot.language.writing)}),o&&e.on("load",function(e){e.title&&(document.title=e.title+" | "+rt)})});var lt=".m-image, .m-youtube-link, .m-youtu-link, .m-vimeo-link";moot(function(e){var n;t(".m-page",e.root).on("click",lt,function(e){var o=t(e.target);if(!o.hc("vimeo-link")||parseInt(o.attr("href").split("/")[3])){e.preventDefault();var i=t("#m-gallery");i[0]||(i=t(d("gallery")).appendTo("body")),n||(n=i.active2("m-"));var a=t("#m-navi",i).empty(),r=t("#m-media"),l=t("iframe",r),s=t("img",r),c=t(lt,o.closest(".m-body"));o.closest(".m-moot"),c=c.filter(function(){var e,n,o=t(this),i=o.text(),c=t("<span/>").appendTo(a).html("<em>"+i+"</em>"),u=o.attr("href");if(/youtu/.test(o.attr("class"))){n=(u.split("?v=")[1]||u.split("/").slice(-1)[0]).split(/[&#]/)[0],e="//www.youtube.com/embed/"+n+"?autoplay=1";var d=/[#&]t=([^&$]+)/.exec(u);d&&(e+="&start="+d[1]),u="//i1.ytimg.com/vi/"+n+"/mqdefault.jpg"}else if(o.hc("vimeo-link")){if(n=u.split("/").slice(-1)[0],!parseInt(n))return!1;e="//player.vimeo.com/video/"+n+"?autoplay=1",t.getJSON("//vimeo.com/api/v2/video/"+n+".json?callback=?",function(e){u=e[0].thumbnail_small,c.css("backgroundImage","url("+u+")").attr("src",u)}),u=""}return it[u]&&(u=it[u].data),c.css("backgroundImage","url("+u+")").click(function(){t("span",a).rc("active"),t(this).ac("active"),l.attr("src",""),r.tc("is-video",!!e),t("div",r).text(i.length>10?i:""),e?(l[0]||(l=t("<iframe/>",{webkitAllowFullScreen:!0,mozallowfullscreen:!0,allowFullScreen:!0,frameborder:0,height:390,width:640}).appendTo(r)),l.attr("src",e)):s.attr("src",u)}),e&&c.ac("video"),!0}),a.toggle(c.length>1),window!=window.parent&&i.one("open",function(){var e=t(window),n=(t(document),300),a=e.outerHeight()-o.offset().top-n-100;0>a&&(n-=a),i.ac("on-iframe").css({paddingTop:o.offset().top-n})}),i.one("close",function(){l.attr("src",""),s.attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==")}).on("click.out",function(e){(e.target==i[0]||e.target==r[0])&&i.trigger("close").off(".out")}),t("span",a).eq(c.index(o)).click(),i.trigger("open")}})}),moot(function(e){var a,r,l=e.root,s=t(d("growl")).appendTo(l),c=s.eq(0),u=s.eq(1),p=t(".m-entries",s);t(".m-destroy",s).click(function(){p.empty(),s.hide(),a=!0}),u.click(function(){s.show(),u.hide(),a=!1}),e.channel.on("moot reply",function(l,s){if(s){s.seed&&(s=s.seed);var m=e.page,g=m.find(s.path);if(!g||"moot"!=m.type&&!t(".m-focus",g.moot.root||1)[0]){var h=s.title||s.body&&s.body[0];h=h.replace(V,function(e){return e.split("/").slice(-1)}).replace(B,function(e,t){return t}),h.length>=90&&(h=h.slice(0,90).slice(0,h.lastIndexOf(" "))+"&hellip;"),h=n(i(o(h)));var v={time:t.now(),user:s.user||s,title:h,path:s.path};v.user.displayname=f(v.user.displayname);var y=t(d("event",v)).prependTo(p);t(".m-link",y).click(function(){function t(){o.root.click(),setTimeout(function(){b(o.find(s.key).root)},500)}var n=m.find(s.path),o=n?n.seed?n:n.moot:m.find(s.moot.path);o?o.is_loaded?o.is_expanded?o.is_expanded&&b(n.root):t():o.load(t):m.path==s.moot.page.path?m.lift(s.moot.path,function(){s=m.find(s.path),s&&b(s.root)}):e.is_forum&&e.load(s.moot.path,function(){s=m.find(s.path),s&&b(s.root)})}),a?u.show().mootboost(200):(u.hide(),c.show().mootboost(200),clearInterval(r),r=setTimeout(function(){c.hide(),u.show()},1e3*et),c.one("mouseenter",function(){clearInterval(r)})),t(".m-entry",c).length>3&&c.ac("large")}}}).on("remove",function(e){t("[data-path='"+e.path+"']",c).remove(),t(".m-event",p)[0]||s.hide()})}),moot(function(e,n){function o(){p.rc("active"),t(document).off("click.m-logo")}function i(e){v.prop("disabled",!0),m.ac("active").html(e)}var a=e.root,r=t("#moot-logo",a),l=t("a",r);if(e.has_products)return t(".m-slogan",r).remove(),l.attr("title",(e.is_forum?"Forums":"Commenting")+" by Moot").tooltip2({prefix:"m-"});var s,c,u=/^[a-zA-Z0-9\-]+$/,p=t(d("start",{name:e.name})).prependTo(a),m=t(".m-tooltip",p),f=t("form",p),h=t("input",f),v=t("button",f);l.mouseover(function(){var e=l.offset();c=setTimeout(function(){p.ac("active").css({top:e.top-p.outerHeight()+5,left:e.left-p.outerWidth()/2+l.outerWidth()/2}),t(document).on("click.m-logo",function(e){t(e.target).closest(p)[0]||o()})},300)}).mouseout(function(e){t(e.originalEvent.relatedTarget).closest("#mt-start")[0]||clearTimeout(c)}),h.on("focus blur",function(e){s="focus"==e.type}),p.mouseleave(function(){s||o()});var b;h.keyup(function(e){if(13!=e.which){var t=this.value,n=t||u.test(t);n?t&&m.rc("active"):i("Use numbers, letters or dashes")}}).one("keypress",function(){m.rc("active")}).keyup(function(){var e=t.trim(this.value);e.length>4&&b!=e&&(b=e,v.prop("disabled",!0),n.call("forumAvailable",e,function(){v.prop("disabled",!1),m.rc("active")}).fail(function(t){/taken/.test(t)?i('"'+e+'" is already reserved'):i('"'+e+'" is not available, please contact <em>info@moot.it</em>')}).always(function(){b=0}))}),f.submit(function(t){t.preventDefault();var n=this.name.value.toLowerCase(),a=n.length;return!u.test(n)||5>a?i("Type 5 characters or more"):(g("https://moot.it/"+n+"/?source="+e.name,900,800),o(),void 0)}),t("#hosted_forum")[0]||t(".m-upgrade",a).click(function(e){e.preventDefault(),g(t(this).attr("href"),1e3,750)})}),moot(function(e){function n(n){t("a.m-facelink",n.jquery?n:void 0).each(function(){var n=t(this).data("href")||t(this).attr("href");t(this).tc("online",!!e.getUser(n.slice(3)))})}function o(e){return t("[href*='"+e.path+"']",c)}function i(e){var n=o(e);return n[0]||(n=t(d("face",{user:e})).tooltip2({prefix:"m-"}).appendTo(c),e.is_admin&&(n.ac("is-admin"),t(".m-tooltip",n).append("<em> ("+s.admin+")</em>")),t("img",n).removeAttr("title")),n}var a=e.root,r=t(".m-nav-online",a),l=t(".m-users",a),s=moot.language;if(e.on("post",function(e){n(e.root)}),e.channel.on("enter leave",n),e.user.on("login logout",n),e.conf().show_online===!1)return r.remove();l[0]||(l=t(d("online")).appendTo(t(".m-sidebar",a))),l.active2({prefix:"m-",trigger:r},function(e,t){var n=t.offset();e.offset({top:n.top+t.outerHeight()+10,left:n.left-l.outerWidth()+t.outerWidth()-10})});var c=t(".m-logged-users",l).empty(),u=t(".m-users-title em",l).add(t(".m-nav-online em",e.root)),p=t(".m-anon-count",l);c.on("click","a",function(){l.trigger("close")}),e.channel.on("enter",function(e){e&&i(e).mootboost(500)}).on("leave",function(e){e&&o(e).fadeOut(function(){t(this).remove()})}).on("away return",function(e,t){o(t).tc("inactive","away"==e)}).on("type",function(e){var n=t("<em/>").ac("typing").appendTo(e.path?o(e):p);setTimeout(function(){n.remove()},1e3*et)}).on("enter leave away return",!0,function(){var t=e.online.length,n=e.anon_count;c.add(u).toggle(t>0),u.text(t),p.toggle(n>0).html((t>0?"+":"")+"<em>"+n+"</em> "+s[1==n?"anon_1":"anon"])}),t.map(e.online,i)}),moot(function(e){function n(e,t){u.tc("quotable",!!l).rc("behind");var n=u.width();e-=u.height(),t-=n-n/6,u[r?"css":"offset"]({top:e,left:t})}function o(){a&&a.rc("active"),u.ac("behind")}function i(e,n,o){if(c.test(e)){var i;return t(".m-facelink",o).filter(function(){var n=t(this).attr("href")||t(this).data("href");return n&&n.indexOf(e)>0}).each(function(){return i=t(".m-body p:contains('"+n+"'):first",t(this).next()),i[0]?!1:void 0}),i}}var a,r,l,s=134,c=/^@[a-z0-9\-]{5,}$/i,u=t(d("share")).appendTo(e.root);u.click(function(n){var i=t(n.target),c=a.closest(".m-post"),u=c.data("post"),d=u.user.displayname,p=e.conf().pageUrl+"#!"+u.path.replace("#",":"),m=u.moot.seed.title;if(i.is("#m-share-fb")){var f={app_id:"140164242702484",picture:t(".m-image[href*='//']:first",c).attr("href")||t('[property="og:image"]:first').attr("content"),name:m,caption:location.host,description:r?l:u.body.join(" "),link:p,redirect_uri:"https://moot.it/sharing/",display:"popup"};g("https://www.facebook.com/dialog/feed?"+t.param(f),650,400)}else if(i.is("#m-share-tw")){r&&(l=m);var h=d.length;l.length+h+21>s&&(l=l.slice(0,s-h-22)+"…"),l='"'+l+'" –'+d;var f={text:l,url:p};g("https://twitter.com/intent/tweet?"+t.param(f),550,420)}else if(!r){var v=t("textarea",a.closest(".m-moot")),y=c.prev(),w=(y.attr("href")||y.data("href")).slice(3),_=v.val();_&&(_+="\n"),_+="> "+w+"\n",_+="> "+l+"\n",b(v,200,function(){v.val(_).keydown();var e=v[0];e.focus(),e.selectionStart=e.selectionEnd=e.value.length})}o()}),t(document).mousedown(function(e){u&&!t(e.target).closest(u)[0]&&o()}).mouseup(function(o){var i=t(o.target);if(r=i.is(".m-menu")){a=i;var s=i.closest(".m-post").data("post").path;t("#m-link",u).attr("href","#!"+s.replace("/"+e.name,"").replace("#",":"));var c=i.ac("active").position();return n(c.top-12,c.left+12)}setTimeout(function(){var e=window.getSelection;l=e?""+e():document.selection.createRange().text;try{if(e&&"P"!=e().getRangeAt(0).endContainer.parentNode.tagName)return}catch(r){}t.trim(l)&&!i.closest(".m-collapsed, a, .m-preview")[0]&&i.closest(".m-body-wrap, .m-title")[0]&&(a=i,n(o.pageY-12,o.pageX+6))},10)}),e.on("format",function(e,n){t("blockquote",e).each(function(){var e=t(this),o=t("p:first",e),a=o.text(),r=t("p:gt(0)",e).text(),l=n.moot?n.moot.root:e.closest(".m-moot"),s=i(a,r,l);s&&(o.ac("user-path"),e.ac("quote").on("mouseenter mouseleave click",function(e){"click"==e.type?b(s):t("body").is(":animated")||s.tc("boosted",/ee/.test(e.type))}))})}),o()});var st=/font-family:\s?['"]?([\w\s]+)['"]?;/,ct=t("<span/>",{text:"My F0n# T000 Str--ing"});moot.css={accent:".m-heart.m-has-likes span, .moot .m-button::after, .moot .m-show-help",accentbg:".moot button, .m-button",body:".moot .m-body, .m-input-body",boxes:".m-moot, .m-sidebar",button:".moot .m-button, .moot button",collapsed:".m-moot.m-collapsed .m-title",create:".moot .m-input-wrap",face:".m-face",header:".moot .m-header",headings:".moot .m-sidebar .m-h3, .m-pagetitle, .m-navi a",input:".m-focused .m-input-wrap, .m-focused.m-replyform textarea",moot:".moot",navi:".m-links",page:"body",para:".m-body p, .moot textarea",replies:".moot .m-replies",reply:".m-reply",selected:".m-navi a.m-selected, .m-pagepage .m-nav-forums, .m-userpage .m-nav-online",sidebar:".m-sidebar",title:".moot .m-title, .moot textarea.m-input-title",topic:".moot .m-moot, .m-create .m-input-wrap, .m-preview",wrap:".m-wrap, .m-tablet"};var ut={};moot.loadFont=function(e,n){if(ut[e]||q(e))return n&&n();ut[e]=!0,e=C(e.replace(/ /g,"+"));var o='<link href="//fonts.googleapis.com/css?family='+e+"\" rel='stylesheet'>";t(o).appendTo("head").load(n)},moot(function(e){function n(){var e=(s[0]||o[0]).clientWidth/l;o.tc("pc",e>=43).tc("tablet",43>e).tc("mobile",25>e)}var o=e.root,i=(e.user.is_logged,e.design),a=t(window),r=(a.outerHeight(),"");o.rc("app-loading loading").tc("sso",e.is_sso).tc("no-title",!e.conf().show_title).tc("ie8",!!t.browser.msie&&9>t.browser.version).tc("webkit",!!t.browser.webkit||!!t.browser.chrome),e.on("load",function(e){o.tc("no-threads",!e[0])}),i&&(o.addClass(i.classes),t.each(i.css,function(e,t){if("page"!=e||/moot.it/.test(location.host)){r+=moot.css[e]+"{"+t+"}";var n=st.exec(t);n&&moot.loadFont(n[1])}}),t("head").append(t("<style/>",{id:"moot-css",text:r})));var l=parseFloat(o.css("fontSize")),s=t(".m-wrap:eq(1)",o);a.resize(n),n(),a.one("load",n)}),moot(function(e,n){function o(){var n=t(this);moot.admin?(moot.admin(e,r),n.trigger("click")):(n.ac("loading"),t.getScript("https://cdn.moot.it/1.11.0/admin.min.js",function(){n.rc("loading"),moot.admin(e,r),n.trigger("click")}))}var i=/.+@.+\..+/i,a=/^[^\<\>]{5,}$/,r=e.root,l=e.user,s=e.conf(),c=moot.language,u=t(".m-nav-account",r),p=t(d("account_overlay")).prependTo(r),m=t(".m-h2",p).text(l.displayname),h=t(".m-admin-area",r),v=t(".m-myname",u),b=t(".m-login",r),y=t(".m-me",u);if(!l.is_logged&&e.is_sso)return b.attr("href",s.login_url),s.login_url||b.remove(),void 0;p.active2({prefix:"m-",trigger:y},function(){var e=y.offset();p.offset({left:e.left+(s.rtl?0:y.outerWidth()-p.outerWidth()),top:e.top+y.outerHeight()+10})}),t(".m-status",p).each(function(){function e(){var e=l.is_visible;t("em",n).text(c[e?"online":"invisible"]),t("a",n).text(c[e?"hide":"show"]),n.tc("invisible",!e)}var n=t(this);t("a",n).click(function(){n.ac("loading"),l.hideToggle(function(){n.rc("loading"),e()})}),l.on("login logout",!0,e)}),t(".m-unfollow",p).each(function(){var e=t(this);l.on("follow unfollow login",!0,function(){var n=l.subscription_count;e.toggle(n>0),t("em",e).text(n)}),t("a",e).click(function(){e.fadeOut(400),l.unfollowAll()})});var w=t(".m-face",p),_=t(".m-preview img, img[title='"+l.displayname+"']",r).add(w),k=t(".m-upload",p);y.one("click",function(){k.jsonrpc({api:"https://api.moot.it",method:"userUpdate",session:e.channel.session}).on("done",function(e,t){_.attr("src",t).rc("loading"),l.emit("update",{img:t})}),k.tooltip2({prefix:"m-"})}),t(":file",k).bind("change drop",function(e){t.each(e.target.files||[],function(e,t){if(t.type.match("image.*")&&15e5>t.size){var n=new FileReader;n.onload=function(e){_.attr("src",e.target.result)},n.readAsDataURL(t)}}),"change"==e.type&&t("button",k).click()}).bind("dragenter dragleave change",function(e){t(this).tc("hover",/enter/.test(e.type))}),t("form:gt(0)",p).each(function(){function e(){var e=t.trim(o.val()),n="email"==d?i:a;return e!=l[d]&&n.test(e)}var n=t(this),o=t("input",n),u=t("<button/>",{text:c.change,disabled:!0}).appendTo(n),d=o.attr("name");o.keyup(function(){var t=e();u.show().prop("disabled",!t),this.value==l[d]&&u.hide(),t&&n.rc("is-error")}),n.submit(function(i){if(!e())return!1;i.preventDefault(),n.ac("loading").rc("valid");var a={},p="email"==d,g=f(t.trim(o.val())),h=t(".m-name:contains('"+l.displayname+"')",r);a[d]=g,p&&(a.url=s.pageUrl),l.update(a,function(){if(n.rc("loading").ac("updated"),u.hide(),!p){var e=t("<span class='m-saved'>"+c.saved+"</span>").appendTo(n);setTimeout(function(){e.remove()},1e3),h.add(m).add(v).text(g)}}).fail(function(e){n.rc("loading").ac("is-error"),t(".m-error",n).text(/taken/.test(e)?c[d+"_taken"]:c.invalid)})})});var x=t(".m-maillist input").prop("checked",!!l.maillist).change(function(){l.update({maillist:!!this.checked},function(){x.parent().mootboost()})});t(".m-password",p).click(function(){var n=t.extend({host:s.url.host,l:c.$code,rtl:s.rtl},e.channel.session);e.brand_logo&&(n.logo=e.brand_logo),e.brand_color&&(n.bgcolor=e.brand_color),g("https://moot.it/login/password.html?"+t.param(n),300,380)}),t(".m-logout",p).click(function(){p.ac("loading"),l.logout()}),l.on("login",l.is_logged,function(){if(w.add(t("img",y)).attr("src",l.img),v.add(m).text(l.displayname),t(".m-names strong",p).text(l.path),t.each(["displayname","email"],function(){t("[name='"+this+"']",p).val(l[this])}),x.prop("checked",!!l.maillist),r.tc("is-unverified",!!l.unverified),l.unverified&&!t(".m-unverified")[0]){t(".m-page",r).prepend(d("unverified")).find(".m-unverified a").click(function(){t(".m-nav-account a").click()});var i=t("<p/>").ac("incomplete").html(c.unver3);t(".m-email .m-h3",p).append(t("<span/>").ac("badge").text(c.unver)).after(i),t("a",i).click(function(){l.sendValidationCode({forumname:e.name,url:s.pageUrl},function(){i.text(c.unver4)})})}if(l.is_admin&&e.is_forum){var a=t(".m-sidebar",r),u=t(".m-forums-title",a);t(".m-edit-cats",a)[0]||t("<a>"+c.edit+"</a>").ac("edit-cats").appendTo(u).one("click",o),h.html(d("admin",{name:e.name})),t(".m-nav-settings, .m-nav-banners",h).one("click",o);var f=e.products||[];t(".m-subs p",a).each(function(){var e=t(this),n=e.attr("class").split("m-sub-")[1],i=t.inArray(n,f)>-1;e.tc("yup",i).tc("upgrade",!i),i&&e.one("click",o)}),2==f.length&&t(".m-subs",a).ac("has-all"),t("#hosted_forum")[0]||t(".m-upgrade:not('.m-yup')",h).click(function(){var n="https://moot.it/pricing/?"+e.name,o=t(this).data("name");o&&(n+="/"+o),g(n,1e3,750)}),t(".m-nav-designer",h).click(function(o){o.preventDefault();var i=t("body").toggleClass("md-enabled");t("#moot-designer")[0]||(t("head").append("<link href='https://cdn.moot.it/1.11.0/designer.css' rel='stylesheet'>"),t("<div/>",{id:"moot-designer"}).appendTo(i).load("https://cdn.moot.it/1.11.0/designer.html",function(){t.getScript("https://cdn.moot.it/1.11.0/designer.min.js",function(){moot.designer(e,n)})}))})}}).on("login logout banned",!0,function(){var e=l.is_logged;r.tc("logged",e).tc("no-logged",!e),p.rc("loading").trigger("close"),r.tc("admin",l.is_admin);var n=e&&l.banTime>0;r.tc("is-banned",n),n&&t(".m-page",r).prepend(d("banned"))}).on("logout",function(){h.empty(),t(".m-unverified, .m-ban-msg, .m-incomplete, .m-edit-cats, .m-email .m-badge",r).remove()}),e.is_sso&&t(".m-h3, form, .m-password, .m-maillist",p).remove()}),moot(function(e){function n(){function n(n,o){return/invalid/.test(o)?(h.empty(),u.append(f),m.url=e.conf().pageUrl,delete m.path,"sendValidationCode"==n&&(m=m.url),p[n](m,function(){h.html(d("expired"))}).fail(function(e){h.html(d("confirm_error")),t(".m-h2",h).text(t.isArray(e)?e[0]:e)})):void 0}var a=(unescape(location.hash).split("!")[1]||"").split("/"),r=moot.language,l=a[0],s=a[1],c=a[2];if(!o&&/password|account|email/.test(l)&&i.test(c)&&s){o=!0;var u=e.root,p=e.user,m={confcode:s,email:c},f=t("<div class='m-mask'><div class='m-panel'/></div>"),h=t(".m-panel",f).append(d("confirm_"+l)),v=t(".m-h3",h);if(p.is_logged||(m.path=e.page.path),v.text()||v.text(c),f.on("click","button",function(){f.remove(),"localhost"!=location.hostname&&history.replaceState&&history.replaceState(null,null,"#")}),t(document).one("keydown",function(e){27==e.which&&f.remove()}),"password"==l)return p.is_logged?!0:p.checkResetCode(m,function(){m.id=m.email,delete m.email,u.append(f),t("button",f).click(function(){t.extend(m,{host:e.conf().url.host,l:r.$code,rtl:e.conf().rtl},e.channel.session),e.brand_logo&&(m.logo=e.brand_logo),e.brand_color&&(m.bgcolor=e.brand_color),g("https://moot.it/login/forgot.html?"+t.param(m),300,270)})}).fail(function(e){m.id=m.email,delete m.email,n("resetPassword",e)});if("account"==l||p.is_logged){var b="account"==l;p[b?"confirmAccount":"confirmEmail"](m,function(){u.append(f),b?(u.rc("is-unverified"),t(".m-unverified",u).remove()):t(".m-email input",u).val(c)}).fail(function(e){n(b?"sendValidationCode":"update",e)})}else u.append(f),t(".m-h2",f).text(r.login1),t("button",f).click(function(){t(".m-login",u).click()});t(window).off("popstate.confirm")}}var o,i=/.+@.+\..+/i;t(window).on("popstate.confirm",n),setTimeout(n,t.browser.msie?500:0)}),moot(function(e){if(!e.is_sso){var n=/^[a-z0-9\-]{5,}$/i,o=window.localStorage||{},i=e.conf(),a=moot.language,r=e.user,l=e.root,s=t();l.on("click",".m-form button, .m-login, .m-like",function(n,l){if(!e.user.is_logged){var s={referrer:o["moot.referrer"],expand_all:!i.show_title,host:i.url.host,url:i.pageUrl,path:e.page.path,l:a.$code,rtl:i.rtl};return e.brand_logo&&(s.logo=e.brand_logo),e.brand_color&&(s.bgcolor=e.brand_color),l&&t.extend(s,l),(window.mootlogin||g)("https://moot.it/login/?"+t.param(t.extend(s,e.channel.session)),360,460),r.one("login join",function(){var e=t(n.target).click();if(e.is("button")){var o=e.closest(".m-post");if(!o[0]){var i=e.closest(".m-moot");i[0]&&(o=t(".m-replies .m-reply:last",i))}b(o)}}),!1}}),r.on("before:join",function(o){function i(){u.prop("disabled",!f.is(":checked")||!m.parent().hc("ok"))}s.trigger("close");var c=t(d("social_join")).appendTo(l),u=t("button",c),p=o.user;t(".m-face",c).attr("src",p.img),t(".m-h2 span",c).text((p.name||p.displayname).split(" ")[0]),t(".m-terms a").attr({href:"https://moot.it/terms",target:"_new"});var m=t(":text",c).val(p.username).keyup(function(){var e=n.test(this.value),o=this.value.length;t(this).parent().tc("ok",e).tc("fail",o>3&&!e),i(),o>2&&m.next().text(a[e?"uname_len":"username_fail"])}),f=t(":checkbox",c).change(i);m.triggerHandler("keyup"),t("form",c).submit(function(){var t={secret:o.secret,username:m.val(),provider:o.provider,path:e.page.path};return r.join(t,function(){l.rc("is-join"),c.remove(),s.trigger("close")}).fail(function(e){/taken/.test(e)&&(m.parent().ac("is-error").rc("ok"),m.next().text(a.uname_taken))}),!1})})}}),t(function(){t(".moot[href]").moot(),t(".moot .moot-url[href]").each(function(){var e=t(this);e.closest(".moot").moot(e.remove().attr("href"))})}),t.fn.moot=function(e,n){return"string"==typeof e&&(e={url:e}),e=t.extend({show_title:!0},e),this.each(function(){var o,i=t(this),a=i.attr("href"),r=i.data(),l=location.hash.split("#!")[1],s=r.category||r.pagetitle||document.title||t("title").text()||"",c=moot.language,u=t("<div class='m-loading-text'>"+c.loading+"</div>");if(a||(a=t(".moot-url",i).remove().attr("href")),t("*",i)[0]&&!t(".m-page",i)[0]&&(o=i.html()),t.extend(e,r),t.extend(e,{mootTitle:i.attr("title"),categoryName:s.slice(0,30*et)||"Untitled",url:(a||e.url).toLowerCase(),pageUrl:e.page_url||location.href.split("#")[0],rtl:"rtl"==t("html").attr("dir")}),l&&"/"==l[0]&&(e.path=unescape(l)),i.is("a")){var p=t("<div/>").attr({"class":i.attr("class"),"data-url":e.url});i.replaceWith(p),i=p}i.addClass("moot m-app-loading"),t("*",i)[0]||i.empty(),i.prepend(u);try{moot("error",function(e){"currentforum:invalid"==e&&i.html(c.badforum+': "'+this.name+'"')}),moot(e,function(e){e.html=o,e.root=i,t.isFunction(n)&&n.call(e,e),u.remove()})}catch(m){i.rc("app-loading"),/json-rpc/.test(m.message)&&i.ac("no-support").html(d("browser")).append('<img style="display:none" src="//oldbrowser.moot.it/'+escape(navigator.userAgent)+'">')}})}}(!this.top,jQuery),function(e){"use strict";function t(e,t){for(var n in t)e[n]=t[n];return e}function n(e,n){return t(t({},e),n)}function o(t,o,a){if(t=t.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;mark&gt;/g,"<mark>").replace(/&lt;\/mark&gt;/g,"</mark>"),!o)for(var r in i){var l=i[r].detect;if(l&&l.test(t)){o=r;break}}var s="",c=[],u=n(i.common,i[o]);for(var r in u){var d=u[r],p=r.split(",");d&&"detect"!=r&&t.replace(d,function(){for(var e,t,n,o,i=0,a=p.length,r=arguments;a>i;i++)e=p[i],t=a>1?1:0,n=r[i+t],o=r[a+t],4!=r.length||t||(n=r[1]||r[0],o=r[2]),i&&(o+=[].slice.call(r,1,i+1).join("").length),c.push([o,o+n.length,e])})}c=c.sort(function(e,t){return e[0]-t[0]});for(var m,f,g,h=0,v=0,b=0,y=c.length;y>v;v++)m=c[v],f=c[v-1]||[],g=c[v+1]||[],b>m[0]||m[0]==g[0]&&g[1]>m[1]||m[1]>b&&(b=m[1],s+=t.substring(h,m[0]),s+='<span class="'+(a||"")+m[2]+'">'+t.substring(m[0],m[1])+"</span>",h=m[1]);return s+=t.substring(h),e?s:"<pre class='"+a+"syntax "+a+(o||"common")+"'>"+s+"</pre>"}var i={common:{comment:/\/\*[^\*]*\*\/|\/\/.*$|\#\s.*\n/gm,string:/'[^']*'|"[^"]*"/g,keyword:/\b(none|true|false|and|array|catch|class|def|delete|echo|end|else|elseif|exit|extends|except|finally|for|foreach|global|if|import|local|module|new|object|or|package|print|private|protected|public|rescue|return|require|self|struct|static|sub|switch|then|this|throw|try|unsigned|var|while)\b/gi,operator:/\+|\!|%|\-|&lt;|&gt;|&amp;|;|:|\||\*|\=/g,bracket:/[{}\[\]\(\)]/g,number:/\b\d+\.?\d*\b/gi,accent1:/\b(boolean|const|void|char|short|int|integer|long|float|double|string)\b/g,"accent2,bracket":/\b(\w+)\s?(\()/gi},html:{operator:0,accent1:0,accent2:0,comment:/(&lt;\!--[^;]*--&gt;)/g,"bracket,accent1":/(&lt;\/?)(\w+)/g,keyword:/doctype/i,"accent2,operator":/([\w-]+)(=)/g,bracket:/&lt;|&gt;/g,detect:/^\s*&lt;/},java:{accent3:/@\w+\b/gi},js:{accent1:/\$|window|document|setTimeout|setInterval|console/g,accent3:/\/.+\/[igm]{0,3}/g,detect:/var\s*\w+\s*=/},css:{keyword:/none|inline|inline-block|block|rgba?|hsla?|solid|dotted/gi,"number,accent1":/(\d+\.*\d*)(px|em|rem|%)/gi,string:/#[a-f0-9]{3,6}/gi,accent1:/\s?([\-\w,\. \s#]+){\s?/gi,accent2:/\b([\-\w]+):\s?/gi,accent3:/\b(before|after|active|hover|focus)\b/gi},python:{accent3:/"""[\w\W]*"""/gm},ruby:{accent1:/\b(String|ArgumentError|puts|Thread|Errno::|Exception)\b/g,accent3:/[@:]\w+/g},markdown:{keyword:/[\*_].+[\*_]/gi,accent1:/#{1,2} .+/g,accent2:/#{3,} .+/g,accent3:/[- =]{3,}/g},sh:{accent1:/\b(echo|rm|ls|mkdir|rmdir|cd|find|cp|exit|pwd|exec|set|sed|awk)\b/g},php:{accent3:/\$\w+\b/g},perl:{"keyword,accent3":/\b(sub)\s*(\w+)\s*{/g},lua:{comment:/--.*\n/g},sql:{accent1:/\b(insert|into|create|table|update|select|from|where|values)\b/gi},redis:{accent1:/[A-Z]+/g}};
i.javascript=i.js,i.stylus=i.css,i.yaml=i.markdown,i.shell=i.bash=i.sh,i.coffee=i.coffeescript=n(i.python,{accent1:i.js.accent1,accent2:/-&gt;/g,detect:/-&gt;/g}),i.django=i.jinja=n(i.html,{bracket:i.common.bracket,keyword:/\b(set|block|endblock|extends|if|endif)\b/g,accent3:/(\{\{.+\}\})/g}),i.markdown.comment=i.html.comment,i.css.detect=i.css.number,i.sql.comment=i.lua.comment,o.lang=i,e?module.exports=o:window.hilite2=o,"function"==typeof jQuery&&(jQuery.fn.hilite2=function(e){return this.each(function(){var t=jQuery(this);t.replaceWith(o(t.html(),t.attr("class"),e))})})}("object"==typeof exports),moot.language={$code:"es",ban:"Ban user",banned:"Banned",ban_usr:"Banned users",days:"Days",forever:"Forever",slogan:"Free forums and commenting by Moot",add:"+ Add",addons:"Add-ons",myaccount:"My account",untitled:"Untitled",design:"Design",no_title:"El título no debe estar vacío",designer:"Diseñador",developer:"Desarrollador",no_index:"Dejar de indizar bajo moot.it",mkpriv:"Hacer privado este foro",sign:"Este foro debe estar <a>firmado</a> antes.",s3:"Depósito S3 propio",s3_tip:"Permite dominio personalizado para motores de búsqueda y almacenamiento para copia de seguridad.",s3_tip2:"Proporciona permisos de acceso a <em>moot-aws@moot.it</em>",s3_no_access:"moot-aws@moot.it no puede acceder a este depósito",s3_missing:"Este depósito no existe",ban_acc:"Cuenta expulsada",ban_msg:"Estás temporalmente expulsado de este foro por violar las políticas del foro. Tiempo restante:",banned4:"Ya no puedes publicar en este foro.",warning:"Atención",profanity:"No están permitidas las palabrotas en este foro. El abuso continuado de está política provocará la expulsión.",img_needed:"Por favor sube una imagen",max:"El tamaño máximo de imagen es 4MB",yes:"Sí",upload:"Subir imágenes",show:"mostrar",hide:"ocultar",invisible:"Invisible",givebody:"El cuerpo no puede estar vacio.",show_old:"Mostrar respuestas más antiguas",show_more:"Mostrar más respuestas",show_new:"Mostrar respuestas más nuevas",start:"Comienza un nuevo tema...",single:"palabra sola",bold:"negrita",italics:"cursiva",monospaced:"monoespaciada",domain:"URL Foro",domaintip:"URL completo al foro al que se envía a los usuarios desde los resultados de búsqueda",learn:"Saber más...",ga:"Google Analytics Id",admins:"Administradores",adminstip:"Nombre de un usuario por linea",settings:"Ajustes",error:"Oops, un error. Por favor cópialo en el portapapeles, y recarga. ¡Lo corregiremos!",body:"Texto del cuerpo",admin:"Admin",someone:"Alguien",writing:"está escribiendo...",basic:"Basico (gratis)",subs:"Suscripciones",manage:"Administrar",fullview:"Vista entera",title:"Título",link:"enlace",avatar:"Cambiar avatar",seo_update:"La página SEO será actualizada dentro una hora",upgrade_link:"Actualización",branding:"Creación de Marca (Branding)",logo:"Logotipo",bgcolor:"Color del fondo",brand_name:"Nombre de marca",css:"Archivo CSS",mootbrand:"Usa branding de Moot",sso:"Single Sign-On",apikey:"Clave de API",apisecret:"Clave secreto",username_fail:"Usar letras, números o guiones",all:"Todas las entradas",anon_1:"anónimo",anon:"anónimos",badforum:"Foro no válido",c_acc1:"Tu cuenta está ahora habilitada en todos los sitios que usen Moot",c_acc:"Cuenta confirmada",c_email:"Email confirmado",cancel:"Cancelar",change:"Cambiar",changepw:"Cambiar contraseña",close:"Cerrar",collapse:"Contraer todo",comm_count_1:"comentario",comm_count_n:"comentarios",comment1:"Sé el primero en comentar...",comment:"Comentar...",edit:"editar",email:"Email",email_taken:"Este email ya está registrado",emailtip:"Tu email nunca es compartido",enter:"ctrl + enter",expired1:"Hemos enviado uno nuevo. Por favor revisa tu email.",expired:"Este enlace ha expirado",feed:"Mis novedades",forumname:"Nombre del foro",forums:"Foros",help2:"enviar",help3:"citado",help5:"código, lenguaje adivinado",help6:"código html",in_forum:"en",invalid:"Valor no válido",join:"Unirse a Moot",later:"Más tarde...",less:"menos",like:"Me gusta",likepost:"Me gusta esta entrada",loading:"Cargando...",login:"Iniciar sesión",login1:"Primero iniciar sesión",login_and:"Iniciar sesión y",logout:"Salir",mark:"Ofensivo o spam",mean:"Te refieres a",name:"Mostrar nombre",nametip:"Tu nombre real, por el que la gente te reconocerá",newcat:"Nueva categoría",newpass:"Nueva contraseña",noresults:"Sin resultados para",nospam:"¡Sin spam en tu foro!",notexist:"no existe.",notify:"Notificarme novedades sobre Moot",ok:"ok",online:"Online",post:"Enviar",preview:"Preview",progress:["cargando...","todavía trabajando...","y trabajando...","abandonando"],reconnect:"Reconectando...",removecat:"Eliminar. No se eliminarán las entradas",removepost:"Eliminar esta entrada",reply:"Contestar...",replybtn:"Contestar",save:"Guardar cambios",saved:"guardados",search:"Buscar",select:"Seleccionar foro",setup:"Configurar ahora",showing:"Mostrando",spam:"Spam",step1:"Hemos enviado un email de confirmación. ¡Tu email no será actualizado antes de que completes este paso!",step:"Un paso más",terms:"Acepto los <a>términos del servicio</a>.",thanks:"¡Gracias!",uname_len:"Escribe 6 caracteres o más",uname_taken:"¡Este nombre de usuario está ocupado!",unametip:"Esto no puede ser cambiado luego",undo:"Deshacer",unlike:"No me gusta",unspam:"No spam",unver1:"Cuenta no verificada",unver2:"Por favor revisa tu email para verificar tu cuenta. Los usuarios verificdos puede ver moots y recibir notificaciones por email. <a>Enviar un nuevo código de verificación...</a>",unver3:"<a>Enviar un nuevo</a> código de verificación a:",unver4:"Enviado. Por favor, revisa tu bandeja de entrada.",unver:"No verificado",unwall:"dejar de vigilar",unwatch:"No vigilar",upgrade2:"Moot usa WebSockets o CORS para la comunicación entre dominios. Funciona en todos los navegadores modernos excepto en Opera 11 y IE7.",upgrade:"Por favor, actualice su navegador",username_taken:"Este nombre de usuario está ocupado",watch:"Vigilar nuevas respuestas",welcome1:"Por favor revisa tu email para completar la registración. Si no recibes un email en un minuto o dos, revisa tu carpeta de spam.",welcome2:"Por favor, proporciona un nombre de usuario",welcome:"Bienvenido a Moot",you:"Tú",months:"Ene,Feb,Mar,Abr,May,Jun,Jul,Ago,Set,Oct,Nov,Dic",min:"m",hour:"h",day:"d",week:"s"};})}(document);